@import "../polythene/polythene";

.tabs {
	$_tabHeight: 48px;
	$_tabIconLabelHeight: 72px;
	$_fontSize: $buttonFontSize;

	overflow-x: auto;
	overflow-y: hidden;
	transform: translate3d(0,0,0);
	@include user-select-none;

	::-webkit-scrollbar {
	    display: none;
	}
	-webkit-overflow-scrolling: touch;

	.tabRow {
		position: relative;
		white-space: nowrap;
		overflow: auto;
		@include user-select-none;
	}

	.tab {
		margin: 0;
		border-radius: 0;
		height: $_tabHeight;
		padding: 0;
		color: inherit;
		min-width: 72px; // for smaller screens; see also media query below
		// max-width: 264px; // set in theme js
		@include user-select-none;

		.content {
			padding: 0 12px;
			height: $_tabHeight;
			line-height: 1.3;

			.layout {
				height: inherit;
			}

			.label,
			.icon {
				$_lineHeight: 1.1 * $_fontSize;
				$_verticalOffset: $_lineHeight - $_fontSize;
				max-width: 264px; // or .tabs width minus 56dp
				line-height: $_lineHeight;
				max-height: 2*$_lineHeight;
				overflow: hidden;
				margin: $_verticalOffset 0 0 0;
				white-space: normal;
			}
			.label {
				opacity: .7;
			}
			.icon {
				margin-left: auto;
				margin-right: auto;
			}
		}

		&.selected {
			.content .label {
				opacity: 1;
			}
		}

		&.hasIconLabel {
			&,
			.content {
				height: $_tabIconLabelHeight;

				.label,
				.icon {
					margin: 0 auto;
				}
				.icon {
					margin-bottom: 8px;
				}
			}
		}
	}

	.tabIndicator {
		$_indicatorHeight: 2px;
		position: absolute;
		height: $_indicatorHeight;
		bottom: 0;
		left: 0;
		width: 100%; // and transformed with js
		// background-color defined in implementation/theme css
		transform: translate3d(0,0,0);
		transform-origin: left 50%;
		transition: all .3s ease-out;
	}

	&.scrollable {
		// hide scrollbar (this approach is required for Firefox)
		max-height: $_tabHeight; // TODO: solve higher tabs, perhaps using `mode` param like header-panel
	
		.tabRow {
			$_scrollbarOffset: 20px;

			padding-bottom: $_scrollbarOffset;
			margin-bottom: -$_scrollbarOffset;

			.tabIndicator {
				bottom: $_scrollbarOffset;
			}
		}
	}
}

.toolbar {
	> div,
	> .toolbar-tools {
		// any bar
		> .tabs,
		> .tabs:last-child {
			@include fit;
			width: auto;
			margin: 0;
		    top: auto;
		}

		.tabRow.indent {
			margin: 0;
			padding-left: $indent;
			overflow: auto;
		}
	}
}

@media (min-width: $screenSizeMedium) {
	.tabs:not(.small):not(.medium) {
		.tab {
			min-width: 160px;
		}
	}
}