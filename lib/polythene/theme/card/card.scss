@import "../polythene/polythene";

.card {
	$_image_size_small:       1 *   80px;
	$_image_size_medium:      1.4 * 80px;
	$_image_size_large:       2 *   80px;
	$_image_size_extra_large: 3 *   80px;

	$_border_radius: 2px;

	$_h_padding: 16px;
	$_v_padding: 24px;
	$_v_padding_small: 16px;
	$_offset_v_padding_to_v_padding_small: $_v_padding - $_v_padding_small;
	$_h_actions_padding: 8px;
	$_v_actions_padding: 8px;
	$_h_padding_title: 16px;
	$_v_padding_title: 24px;
	$_v_padding_title_bottom_tight: 16px;
	$_h_padding_text: 16px;
	$_v_padding_text: 16px;
	$_v_padding_text_bottom: 24px;
	$_v_bottom_padding_text_bottom_tight: 16px;
	$_offset_title_line_height: 5px;

	$_primary_title_line_height_natural_padding_top: 7px;
	$_primary_title_line_height_natural_padding_bottom: 9px;
	$_subtitle_line_height_natural_padding_top: 3px;
	$_subtitle_line_height_natural_padding_bottom: 7px;
	$_text_line_height_natural_padding_top: 6px;
	$_text_line_height_natural_padding_bottom: 7px;	

	@at-root {
		&,
	    a#{&} {
	        display: block;
	    }
	}

	position: relative;
	border-radius: $_border_radius;

	.shadow {
		z-index: 0;
	}

	.media {
		position: relative;
		overflow: hidden;
		border-top-left-radius: inherit;
		border-top-right-radius: inherit;

		img {
			display: none;
		    width: 100%;
		    position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
		}
		&.landscape {
			padding-bottom: 100% / 16 * 9;
		}
		&.square {
			padding-bottom: 100%;
		}
		img.crop-x {
			width: 100%;
			height: auto;
			display: block;
		}
		img.crop-y {
			height: 100%;
			width: auto;
			display: block;
		}
		&:last-child {
			&, img {
				border-bottom-left-radius: $_border_radius;
				border-bottom-right-radius: $_border_radius;
			}
		}
	}
	.header + .media {
		border-top-left-radius: 0;
		border-top-right-radius: 0;
	}
	.shadow + .primary-media {
		// first child
		&, img {
			border-top-left-radius: $_border_radius;
			border-top-right-radius: $_border_radius;
		}
	}

	.overlay,
	.image-dimmer {
		position: absolute;
		bottom: 0;
		top: 0;
		right: 0;
		left: 0;
	}
	.image-dimmer {
		z-index: 1;
	}
	.overlay-content {
		position: absolute;
		bottom: 0;
		top: auto;
		right: 0;
		left: 0;
		z-index: 2;
	}

	.header {
		$_one_line_height_with_icon: 72px;
		$_icon_element_width: 72px - 4;
		$_one_line_padding: 8px;

		height: $_one_line_height_with_icon;

		.title {
			padding: $_one_line_padding 0;
			font-size: 14px;
			line-height: 20px;
			margin-top: 3px;
		}

		.content-icon {
		    position: relative;
		    width: $_icon_element_width;
		    height: $_one_line_height_with_icon;
		    padding: $_one_line_padding 0;

		    .icon {
		        position: absolute;
		        left: $_h_padding;
		        @include vertical-center(absolute);
		    }
		}
	}

	.primary {
		position: relative;

		&.has-media:not(:last-child) {
			padding-bottom: 16px;
		}
		&.has-media + .actions {
			margin-top: -16px;
		}

		& + .text {
			margin-top: -16px;
		}

		.title {
			padding: $_v_padding_title $_h_padding_title ($_v_padding_title - $_subtitle_line_height_natural_padding_bottom) $_h_padding_title;
			font-size: 24px;
			line-height: 32px;
		}
		.subtitle {
			font-size: 14px;
	        line-height: 24px;
	        margin-top: -1px; // because of smaller line height
		}

		&.tight {
			.title {
				padding-bottom: $_v_padding_title_bottom_tight - $_subtitle_line_height_natural_padding_bottom;;
			}
		}

		.primary-media {
			margin: 16px 16px 0 16px;

			.media {
				&, img {
					border-radius: 0;
				}
			}
			&.small {
				width: $_image_size_small;
			}
			&.medium {
				width: $_image_size_medium;
			}
			&.large {
				width: $_image_size_large;
			}
			&.extra-large {
				width: $_image_size_extra_large;
				margin-bottom: 16px;
			}
		}
		.actions {
			padding: 8px;
			margin: 16px 16px 16px 0;
		}
	}

	.actions {
		$_button_padding: 6px;
		$_v_padding: ($_v_actions_padding - $_button_padding);
		
		min-height: 36px + 2*8;
		padding: $_v_padding $_h_actions_padding;

		&.tight {
			min-height: 0;
		}

		.icon-button .content > span {
			padding: 8px;
		}
		
		&[horizontal]:not([justified]) {
			:first-child {
				margin-left: 0;
			}
			.button {
				min-width: 0;
			}
			.icon-button {
				margin-right: 8px;
			}
		}

		&[vertical] {
			$_v_button_margin: 2px;
			$_v_padding: $_v_actions_padding - $_v_button_margin;

			padding-top: $_v_padding;
			padding-bottom: $_v_padding;

			// nested
			.actions {
				margin-left: -$_h_actions_padding;
				margin-right: -$_h_actions_padding;
				min-height: 0;

				&:first-child {
					margin-top: -$_v_padding;
				}
				&:last-child {
					margin-bottom: -$_v_padding;
				}
				:first-child {
					margin-left: 0;
				}
			}

			.button {
				height: 36px;
				padding: 0;
				margin-top: $_v_button_margin;
				margin-bottom: $_v_button_margin;
			}
		}
	}

	.text {
		padding-top: $_v_padding_text - $_text_line_height_natural_padding_top;
		padding-right: $_h_padding_text;
		padding-left: $_h_padding_text;
		padding-bottom: $_v_bottom_padding_text_bottom_tight - $_text_line_height_natural_padding_bottom;
		font-size: 14px;
		line-height: 24px;

		&:last-child {
			padding-bottom: $_v_padding_text_bottom - $_text_line_height_natural_padding_bottom;
		}
		&.tight {
			padding-bottom: $_v_bottom_padding_text_bottom_tight - $_text_line_height_natural_padding_bottom;
		}
	}

	.text,
	.primary {
		& + .actions:not(:last-child) {
			margin-top: -($_offset_v_padding_to_v_padding_small + 1);
			margin-bottom: -($_offset_v_padding_to_v_padding_small - 1);
		}
	}

	.actions + .text {
		margin-top: 8px;
	}
}