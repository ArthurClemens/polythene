{"version":3,"sources":["transition.es6"],"names":["SHOW_DURATION","HIDE_DURATION","SHOW_DELAY","HIDE_DELAY","TRANSITION","show","transition","opts","hide","getDuration","showDuration","hideDuration","getDelay","showDelay","hideDelay","deferred","el","resolve","promise","state","style","beforeShow","transitionDuration","transitionDelay","applyTransition","delay","showClass","classList","applyAfterTransition","afterHide","doTransition","setTimeout","maybeDelayTransition","beforeTransition"],"mappings":"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","file":"transition.js","sourcesContent":["/*\nGeneric show/hide transition module\n*/\n\nimport m from 'mithril';\n\n// defaults\nconst SHOW_DURATION = .220; // default dialog timing\nconst HIDE_DURATION = .200; // default dialog timing\nconst SHOW_DELAY = 0;\nconst HIDE_DELAY = 0;\nconst TRANSITION = 'both';\n\n// See: transition\nconst show = (opts) =>\n    transition(opts, 'show');\n\nconst hide = (opts) =>\n    transition(opts, 'hide');\n\n/*\nopts:\n- transition\n- showDuration\n- hideDuration\n\n- state (show, hide)\n*/\nconst getDuration = (opts, state) => {\n    const transition = opts.transition || TRANSITION;\n    if (transition === 'none') {\n        return 0;\n    } else if (transition === 'show' && state === 'hide') {\n        return 0;\n    } else if (transition === 'hide' && state === 'show') {\n        return 0;\n    } else {\n        // both\n        return (state === 'show') ? (opts.showDuration !== undefined) ? opts.showDuration : SHOW_DURATION : (opts.hideDuration !== undefined) ? opts.hideDuration : HIDE_DURATION;\n    }\n    return 0;\n};\n\n/*\nopts:\n- transition (show, hide, both)\n- showDelay\n- hideDelay\n\n- state (show, hide)\n*/\nconst getDelay = (opts, state) => {\n    const transition = opts.transition || TRANSITION;\n    if (transition === 'none') {\n        return 0;\n    } else if (transition === 'show' && state === 'hide') {\n        return 0;\n    } else if (transition === 'hide' && state === 'show') {\n        return 0;\n    } else {\n        // both\n        return (state === 'show') ? (opts.showDelay !== undefined) ? opts.showDelay : SHOW_DELAY : (opts.hideDelay !== undefined) ? opts.hideDelay : HIDE_DELAY;\n    }\n    return 0;\n};\n\n/*\nopts:\n- el\n- duration\n- delay\n- showClass\n- beforeShow\n- show\n- hide\n- afterHide\n- showDelay\n- hideDelay\n\n- state (show, hide)\n*/\nconst transition = (opts, state) => {\n    const deferred = m.deferred();\n    const el = opts.el;\n    if (!el) {\n        deferred.resolve();\n        return deferred.promise;\n    }\n    const transitionDuration = getDuration(opts, state) * 1000;\n    const delay = getDelay(opts, state) * 1000;\n    const style = el.style;\n    const beforeTransition = (opts.beforeShow && state === 'show')\n        ? () => {\n            style.transitionDuration = '0ms';\n            style.transitionDelay = '0ms';\n            opts.beforeShow();\n        }\n        : null;\n    const applyTransition = () => {\n        style.transitionDuration = transitionDuration + 'ms';\n        style.transitionDelay = delay + 'ms';\n        if (opts.showClass) {\n            el.classList[(state === 'show') ? 'add' : 'remove'](opts.showClass);\n        }\n        if (opts.show && typeof opts.show === 'function' && state === 'show') {\n            opts.show();\n        }\n        if (opts.hide && typeof opts.hide === 'function' && state === 'hide') {\n            opts.hide();\n        }\n    };\n    const applyAfterTransition = () => {\n        if (opts.afterHide && state === 'hide') {\n            style.transitionDuration = '0ms';\n            style.transitionDelay = '0ms';\n            opts.afterHide();\n        }\n    };\n\n    const doTransition = () => {\n        applyTransition();\n        setTimeout(() => {\n            applyAfterTransition();\n            deferred.resolve();\n        }, transitionDuration + delay);\n    };\n\n    const maybeDelayTransition = () => {\n        if (transitionDuration === 0) {\n            doTransition();\n        } else {\n            setTimeout(() => {\n                doTransition();\n            }, 0);\n        }\n    };\n\n    if (beforeTransition) {\n        beforeTransition();\n        setTimeout(() => {\n            maybeDelayTransition();\n        }, 0);\n    } else {\n        maybeDelayTransition();\n    }\n\n    return deferred.promise;\n};\n\nexport default {\n    show,\n    hide\n};\n"]}