'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _mithril=require('mithril'),_mithril2=_interopRequireDefault(_mithril);require('polythene/common/object.assign');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var multiple=function(a){var b=[],c=function itemIndex(l){var m=f(l);return b.indexOf(m)},d=function removeItem(l){var m=c(l);-1!==m&&b.splice(m,1)},e=function replaceItem(l,m){var n=c(l);-1!==n&&(b[n]=m)},f=function findItem(l){for(var m=0;m<b.length;m++)if(b[m].instanceId===l)return b[m]},g=function next(){b.length&&(b[0].show=!0,_mithril2.default.redraw())},h=function _remove(l){a.queue?(b.shift(),setTimeout(g,0)):d(l)},j=function setPauseState(l,m){var n=f(m);n&&(n.pause=l,n.unpause=!l)},k=function makeItem(l,m){var n,p=new Promise(function(t){n=t}),q,s=new Promise(function(t){q=t});return Object.assign({},a,{instanceId:m,opts:l,show:!a.queue,showPromise:p,hidePromise:s,didShow:function didShow(){var t='function'==typeof l?l():l;return t.didShow&&t.didShow(m),n(m)},didHide:function didHide(){var t='function'==typeof l?l():l;return t.didHide&&t.didHide(m),a.queue&&h(m),q(m)}})};return{count:function count(){return b.length},clear:function clear(){return b.length=0},show:function show(l){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a.defaultId,n=void 0;if(a.queue)n=k(l,m),b.push(n),1===b.length&&g();else{var o=f(m);n=k(l,m),o?e(m,n):b.push(n)}return n.showPromise},hide:function hide(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.defaultId,m=void 0;return a.queue?b.length&&(m=b[0]):m=f(l),m?(m.hide=!0,m.hidePromise):Promise.resolve(l)},remove:function remove(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:a.defaultId;h(l)},pause:function pause(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:a.defaultId;j(!0,l)},unpause:function unpause(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:a.defaultId;j(!1,l)},view:function view(){var l=b.filter(function(m){return m.show});return l.length?(document.body.classList.add(a.bodyShowClass),(0,_mithril2.default)(a.tag,l.map(function(m){return _mithril2.default.component(a.instance,Object.assign({},m,{transitions:a.transitions,key:m.key||m.instanceId}))}))):(document.body.classList.remove(a.bodyShowClass),(0,_mithril2.default)(a.noneTag))}}};exports.default=multiple,module.exports=exports['default'];
//# sourceMappingURL=multiple.js.map