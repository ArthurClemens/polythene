"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril),SHOW_DURATION=.22,HIDE_DURATION=.2,SHOW_DELAY=0,HIDE_DELAY=0,TRANSITION="both",show=function(opts){return transition(opts,"show")},hide=function(opts){return transition(opts,"hide")},getDuration=function(opts,state){var transition=opts.transition||TRANSITION;return"none"===transition?0:"show"===transition&&"hide"===state?0:"hide"===transition&&"show"===state?0:"show"===state?void 0!==opts.showDuration?opts.showDuration:SHOW_DURATION:void 0!==opts.hideDuration?opts.hideDuration:HIDE_DURATION},getDelay=function(opts,state){var transition=opts.transition||TRANSITION;return"none"===transition?0:"show"===transition&&"hide"===state?0:"hide"===transition&&"show"===state?0:"show"===state?void 0!==opts.showDelay?opts.showDelay:SHOW_DELAY:void 0!==opts.hideDelay?opts.hideDelay:HIDE_DELAY},transition=function(opts,state){var deferred=_mithril2["default"].deferred(),el=opts.el;if(!el)return deferred.resolve(),deferred.promise;var transitionDuration=1e3*getDuration(opts,state),delay=1e3*getDelay(opts,state),style=el.style,beforeTransition=opts.beforeShow&&"show"===state?function(){style.transitionDuration="0ms",style.transitionDelay="0ms",opts.beforeShow()}:null,applyTransition=function(){style.transitionDuration=transitionDuration+"ms",style.transitionDelay=delay+"ms",opts.showClass&&el.classList["show"===state?"add":"remove"](opts.showClass),opts.show&&"function"==typeof opts.show&&"show"===state&&opts.show(),opts.hide&&"function"==typeof opts.hide&&"hide"===state&&opts.hide()},applyAfterTransition=function(){opts.afterHide&&"hide"===state&&(style.transitionDuration="0ms",style.transitionDelay="0ms",opts.afterHide())},doTransition=function(){applyTransition(),setTimeout(function(){applyAfterTransition(),deferred.resolve()},transitionDuration+delay)},maybeDelayTransition=function(){0===transitionDuration?doTransition():setTimeout(function(){doTransition()},0)};return beforeTransition?(beforeTransition(),setTimeout(function(){maybeDelayTransition()},0)):maybeDelayTransition(),deferred.promise};exports["default"]={show:show,hide:hide},module.exports=exports["default"];
//# sourceMappingURL=transition.js.map