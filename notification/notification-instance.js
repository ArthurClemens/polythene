'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),require('polythene/common/object.assign');var _mithril=require('mithril'),_mithril2=_interopRequireDefault(_mithril),_timer=require('polythene/common/timer'),_timer2=_interopRequireDefault(_timer),_transition=require('polythene/common/transition'),_transition2=_interopRequireDefault(_transition),_isomorphic=require('polythene/common/isomorphic'),_isomorphic2=_interopRequireDefault(_isomorphic);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var CSS_CLASSES={content:'pe-notification__content',title:'pe-notification__title',multilineTitle:'pe-notification__title--multiline',action:'pe-notification__action',horizontal:'pe-notification--horizontal',vertical:'pe-notification--vertical'},DEFAULT_TIME_OUT=3,pause=function(a){a.isPaused=!0,a.timer&&a.timer.pause()},unpause=function(a){a.isPaused=!1,a.timer&&a.timer.resume()},stopTimer=function(a){a.timer&&a.timer.stop()},show=function(a,b){stopTimer(a);var c=a.instanceId;return a.isTransitioning=!0,_transition2.default.show(Object.assign({},b,a.transitions.show(a,b))).then(function(){a.isTransitioning=!1,a.didShow&&a.didShow(c);var d=b.timeout;if(0===d);else{var f=void 0===d?DEFAULT_TIME_OUT:d;a.timer=new _timer2.default(function(){hide(a,b)},1e3*f)}})},hide=function(a,b){stopTimer(a);var c=a.instanceId;return a.isTransitioning=!0,_transition2.default.hide(Object.assign({},b,a.transitions.hide(a,b))).then(function(){stopTimer(a),a.isTransitioning=!1,a.didHide&&a.didHide(c),_mithril2.default.redraw()})},createView=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=b.tag||'div',d={class:[a.class,'vertical'===b.layout?CSS_CLASSES.vertical:CSS_CLASSES.horizontal,b.class].join(' '),id:b.id||'',config:function config(i,j,k,l){j||(b.config&&b.config(i,j,k,l),a.el=i,a.containerEl=_isomorphic2.default.isClient()?document.querySelector(b.containerSelector||'.pe-notification__holder'):null,show(a,b))},onclick:function onclick(i){i.preventDefault()}},g=b.title,h={tag:'div',attrs:{'class':CSS_CLASSES.content},children:[g?{tag:'div',attrs:{'class':CSS_CLASSES.title,config:function titleConfig(i,j){if(!_isomorphic2.default.isServer()&&!j){var k=i.getBoundingClientRect().height,l=parseInt(window.getComputedStyle(i).lineHeight,10),m=parseInt(window.getComputedStyle(i).paddingTop,10),n=parseInt(window.getComputedStyle(i).paddingBottom,10);k>l+m+n&&i.classList.add(CSS_CLASSES.multilineTitle)}}},children:[g]}:null,b.action?{tag:'div',attrs:{'class':CSS_CLASSES.action},children:[b.action]}:null]};return(0,_mithril2.default)(c,d,h)},component={controller:function controller(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return Object.assign({},a,{el:null,containerEl:null,dismissEl:null,isTransitioning:!1,timer:null,isPaused:!1})},view:function view(a,b){var c='function'==typeof b.opts?b.opts():b.opts;return b.hide&&!a.isTransitioning&&hide(a,c),b.pause&&!a.isPaused?pause(a,c):b.unpause&&a.isPaused&&unpause(a,c),createView(a,c)}};exports.default=component,module.exports=exports['default'];
//# sourceMappingURL=notification-instance.js.map