"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),require("polythene/common/object.assign");var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril);require("polythene/selection-control/theme/theme");var CSS_CLASSES={block:"pe-control",label:"pe-control__label",input:"pe-control__input",box:"pe-control__box",on:"pe-control--on",off:"pe-control--off",disabled:"pe-control--disabled",small:"pe-control--small",regular:"pe-control--regular",medium:"pe-control--medium",large:"pe-control--large"},typeClasses={small:CSS_CLASSES.small,regular:CSS_CLASSES.regular,medium:CSS_CLASSES.medium,large:CSS_CLASSES.large},classForType=function(){var mode=arguments.length<=0||void 0===arguments[0]?"regular":arguments[0];return typeClasses[mode]},createView=function(ctrl){var opts=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"function"==typeof opts.checked&&ctrl.setChecked(opts.checked());var checked=ctrl.checked(),tag=opts.tag||"div",name=opts.name||"",props={"class":[CSS_CLASSES.block,opts.defaultClass,checked?CSS_CLASSES.on:CSS_CLASSES.off,opts.disabled?CSS_CLASSES.disabled:null,classForType(opts.size),opts["class"]].join(" "),id:opts.id||"",config:function(el,inited,context,vdom){inited||opts.config&&opts.config(el,inited,context,vdom)}},content=[(0,_mithril2["default"])("input",{"class":CSS_CLASSES.input,name:name,value:ctrl.value(),type:opts.type,checked:checked,config:function(el,inited){inited||ctrl.setInputEl(el)}}),(0,_mithril2["default"])("label",Object.assign({"class":CSS_CLASSES.label},opts.disabled?null:{onclick:function(){"radio"===opts.type&&checked||ctrl.toggle()}}),[opts.selectionView?opts.selectionView(checked,opts):null,opts.label?(0,_mithril2["default"])("span",opts.label):null])];return(0,_mithril2["default"])(tag,props,[opts.before,content,opts.after])},component={controller:function(){var opts=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],defaultChecked=!1,_value=opts.value||"1",inputEl=void 0,setInputElChecked=function(isChecked){inputEl&&(inputEl.checked=isChecked)},getOptsChecked=function(){if("function"==typeof opts.checked){var v=opts.checked();return void 0!==v?v:defaultChecked}return void 0!==opts.checked?opts.checked:defaultChecked},setInputEl=function(el){inputEl=el,setInputElChecked(getOptsChecked())},setChecked=function(isChecked){setInputElChecked(isChecked),opts.getState&&opts.getState({checked:inputEl?inputEl.checked:getOptsChecked(),value:_value,el:inputEl})},toggle=function(){setChecked(!inputEl.checked)};return{setInputEl:setInputEl,setChecked:setChecked,checked:function(){return inputEl?inputEl.checked:getOptsChecked()},toggle:toggle,value:function(){return _value}}},view:function(ctrl){var opts=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return createView(ctrl,opts)}};exports["default"]=component,module.exports=exports["default"];
//# sourceMappingURL=selection-control.js.map