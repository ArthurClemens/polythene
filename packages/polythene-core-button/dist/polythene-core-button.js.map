{"version":3,"file":"polythene-core-button.js","sources":["../../polythene-css-classes/button.js","../../polythene-css-classes/shadow.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  washColor:        \"pe-button__wash-color\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n  hasHover:         \"pe-button--has-hover\",\n};\n","\nexport default {\n  component:          \"pe-shadow\",\n      \n  // elements      \n  bottomShadow:       \"pe-shadow__bottom\",\n  topShadow:          \"pe-shadow__top\",\n\n  // states\n  animated:           \"pe-shadow--animated\",\n  depth_n:            \"pe-shadow--depth-\",\n  with_active_shadow: \"pe-with-active-shadow\",\n};\n","import { filterSupportedAttributes, iconDropdownDown } from \"polythene-core\";\nimport classes from \"polythene-css-classes/button\";\nimport shadowClasses from \"polythene-css-classes/shadow\";\nimport { getDepthClass } from \"polythene-core-shadow\";\n\nconst DEFAULT_SHADOW_DEPTH = 1;\n\nexport const _Button = ({\n  h,\n  a,\n  getRef,\n  useState,\n  useEffect,\n  useRef,\n  Ripple,\n  Shadow,\n  Icon,\n  ...props\n}) => {\n  const events = props.events || {};\n  const [domElement, setDomElement] = useState();\n  const [isInactive, setIsInactive] = useState(props.inactive);\n  const disabled = props.disabled;\n  const inactive = props.inactive || isInactive;\n  const onClickHandler = events[a.onclick] || (() => {});\n  const onKeyUpHandler = events[a.onkeyup] || onClickHandler;\n  const shadowDepth = props.raised\n    ? props.shadowDepth !== undefined\n      ? props.shadowDepth\n      : DEFAULT_SHADOW_DEPTH\n    : 0;\n  const animateOnTap = props.animateOnTap !== false ? true : false;\n\n  const handleInactivate = () => {\n    if (props.inactivate === undefined) {\n      return;\n    }\n    setIsInactive(true);\n    setTimeout(() => setIsInactive(false), props.inactivate * 1000);\n  };\n\n  const hasHover =\n    !disabled &&\n    !props.selected &&\n    (props.raised ? props.wash : props.wash !== false);\n\n  const handleMouseLeave = (e) => {\n    domElement.blur();\n    domElement.removeEventListener(\"mouseleave\", handleMouseLeave);\n  };\n\n  const aria = Object.assign(\n    {},\n    // default:\n    props.element === \"button\" ? { role: \"button\" } : {},\n    // attrs:\n    props.aria,\n    // overrides:\n    disabled || inactive\n      ? {\n          \"aria-disabled\": \"true\",\n        }\n      : undefined\n  );\n  const isAriaButton = aria.role === \"button\";\n\n  const componentProps = Object.assign(\n    {},\n    filterSupportedAttributes(props, {\n      add: [a.formaction, \"type\"],\n      remove: [\"style\"],\n    }), // Set style on content, not on component\n    getRef((dom) => {\n      if (!dom || domElement) {\n        return;\n      }\n      setDomElement(dom);\n      if (props.getRef) {\n        props.getRef(dom);\n      }\n    }),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.super,\n        props.parentClassName || classes.component,\n        props.contained ? classes.contained : undefined,\n        // Raised button classes\n        props.raised ? classes.contained : undefined,\n        props.raised ? classes.raised : undefined,\n        props.raised && animateOnTap\n          ? shadowClasses.with_active_shadow\n          : undefined,\n        props.raised && animateOnTap\n          ? getDepthClass(shadowDepth + 1)\n          : undefined,\n        //\n        hasHover ? classes.hasHover : undefined,\n        props.selected ? classes.selected : undefined,\n        props.highLabel ? classes.highLabel : undefined,\n        props.extraWide ? classes.extraWide : undefined,\n        disabled ? classes.disabled : undefined,\n        inactive ? classes.inactive : undefined,\n        props.separatorAtStart ? classes.separatorAtStart : undefined,\n        props.border || props.borders ? classes.border : undefined,\n        props.dropdown ? classes.hasDropdown : undefined,\n        props.dropdown\n          ? props.dropdown.open\n            ? classes.dropdownOpen\n            : classes.dropdownClosed\n          : undefined,\n        props.tone === \"dark\" ? \"pe-dark-tone\" : undefined,\n        props.tone === \"light\" ? \"pe-light-tone\" : undefined,\n        props.className || props[a.class],\n      ].join(\" \"),\n      [a.tabindex]: isAriaButton\n        ? (props[a.tabindex] || 0).toString()\n        : undefined, // do not set to -1 when disabled or inactive to allow screen readers to access the button\n    },\n    inactive\n      ? null\n      : {\n          ...events,\n          [a.onmousedown]: (e) => (\n            domElement &&\n              domElement.addEventListener &&\n              domElement.addEventListener(\"mouseleave\", handleMouseLeave),\n            props.events &&\n              props.events[a.onmousedown] &&\n              props.events[a.onmousedown](e)\n          ),\n          [a.onclick]: (e) => (\n            document.activeElement === domElement &&\n              document.activeElement.blur(),\n            handleInactivate(e),\n            onClickHandler(e)\n          ),\n          [a.onkeyup]: (e) => {\n            if (document.activeElement === domElement) {\n              if (\n                e.key === \"Space\" ||\n                e.keyCode === 32 ||\n                (isAriaButton && (e.key === \"Enter\" || e.keyCode === 13))\n              ) {\n                // For accessibility: don't blur\n                if (onKeyUpHandler) {\n                  onKeyUpHandler(e);\n                }\n              }\n              if (props.events && props.events[a.onkeyup]) {\n                props.events[a.onkeyup](e);\n              }\n            }\n          },\n        },\n    props.url,\n    disabled ? { disabled: true } : undefined,\n    aria\n  );\n\n  const noink = props.ink !== undefined && props.ink === false;\n  const buttonContent = props.content\n    ? props.content\n    : props.label !== undefined\n    ? typeof props.label === \"object\"\n      ? props.label\n      : h(\n          \"div\",\n          {\n            className: classes.label,\n          },\n          h(\n            \"div\",\n            {\n              className: classes.textLabel,\n              style: props.textStyle,\n            },\n            props.label\n          )\n        )\n    : props.children;\n\n  const componentContent = h(\n    \"div\",\n    {\n      className: classes.content,\n      style: props.style,\n    },\n    [\n      h(Shadow, {\n        shadowDepth: shadowDepth !== undefined ? shadowDepth : 0,\n        animated: true,\n      }),\n      disabled || noink\n        ? undefined\n        : h(\n            Ripple,\n            Object.assign(\n              {},\n              {\n                target: domElement,\n              },\n              props.ripple\n            )\n          ),\n      h(\n        \"div\",\n        {\n          className: classes.wash,\n        },\n        h(\"div\", { className: classes.washColor })\n      ),\n      buttonContent,\n      props.dropdown\n        ? h(Icon, {\n            className: classes.dropdown,\n            svg: { content: h.trust(iconDropdownDown) },\n            \"aria-hidden\": \"true\",\n          })\n        : null,\n    ]\n  );\n  return h(props.element || \"a\", componentProps, [\n    props.before,\n    componentContent,\n    props.after,\n  ]);\n};\n"],"names":["component","row","content","label","textLabel","wash","washColor","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","hasHover","h","a","getRef","useState","useEffect","useRef","Ripple","Shadow","Icon","props","events","domElement","setDomElement","isInactive","setIsInactive","onClickHandler","onclick","onKeyUpHandler","onkeyup","shadowDepth","undefined","animateOnTap","handleMouseLeave","e","blur","removeEventListener","aria","_extends","element","role","isAriaButton","componentProps","filterSupportedAttributes","add","formaction","remove","dom","testId","className","classes","parentClassName","shadowClasses","getDepthClass","borders","open","tone","join","tabindex","toString","onmousedown","addEventListener","document","activeElement","inactivate","setTimeout","key","keyCode","url","noink","ink","buttonContent","_typeof","style","textStyle","children","componentContent","animated","target","ripple","svg","trust","iconDropdownDown","before","after"],"mappings":"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"}