!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={},e["polythene-core"])}(this,(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var a,i,n=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var c={component:"pe-card",actions:"pe-card__actions",any:"pe-card__any",content:"pe-card__content",header:"pe-card__header",headerTitle:"pe-card__header-title",media:"pe-card__media",mediaDimmer:"pe-card__media__dimmer",overlay:"pe-card__overlay",overlayContent:"pe-card__overlay__content",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",subtitle:"pe-card__subtitle",text:"pe-card__text",title:"pe-card__title",actionsBorder:"pe-card__actions--border",actionsHorizontal:"pe-card__actions--horizontal",actionsJustified:"pe-card__actions--justified",actionsTight:"pe-card__actions--tight",actionsVertical:"pe-card__actions--vertical",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",mediaOriginStart:"pe-card__media--origin-start",mediaOriginCenter:"pe-card__media--origin-center",mediaOriginEnd:"pe-card__media--origin-end",mediaLarge:"pe-card__media--large",mediaMedium:"pe-card__media--medium",mediaRatioLandscape:"pe-card__media--landscape",mediaRatioSquare:"pe-card__media--square",mediaRegular:"pe-card__media--regular",mediaSmall:"pe-card__media--small",overlaySheet:"pe-card__overlay--sheet",primaryHasMedia:"pe-card__primary--media",primaryTight:"pe-card__primary--tight",textTight:"pe-card__text--tight"},l={landscape:16/9,square:1},d={small:c.mediaSmall,regular:c.mediaRegular,medium:c.mediaMedium,large:c.mediaLarge},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular";return d[e]},m="pe-button-row",p={horizontal:c.actionsHorizontal,vertical:c.actionsVertical,justified:c.actionsJustified},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal";return p[e]};e._Card=function(e){var i=e.h,o=e.a,s=e.CardActions,l=e.CardMedia,d=e.CardPrimary,u=e.Icon,m=e.ListTile,p=e.Shadow,y=a(e,["h","a","CardActions","CardMedia","CardPrimary","Icon","ListTile","Shadow"]),f=r({},t.filterSupportedAttributes(y),y.testId&&{"data-test-id":y.testId},{className:[c.component,"dark"===y.tone?"pe-dark-tone":null,"light"===y.tone?"pe-light-tone":null,y.className||y[o.class]].join(" ")},y.url,y.events),h=Array.isArray(y.content)?y.content.map((function e(a){var n=Object.keys(a)[0],p=r({},a[n],{dispatcher:e,key:void 0});switch(n){case"actions":return i(s,p);case"header":return function(e){var t=e.props,a=e.h,i=e.a,n=e.Icon;return a(e.ListTile,r({},t,{className:[c.header,t.className||t[i.class]].join(" ")},t.icon?{front:a(n,t.icon)}:null))}({props:p,h:i,a:o,Icon:u,ListTile:m});case"media":return i(l,p);case"overlay":return function(e){var t=e.dispatcher,r=e.props,a=e.h,i=e.a,n=r.element||"div",o=r.content.map(t);return a("div",{style:r.style,className:[c.overlay,r.sheet?c.overlaySheet:null,"light"===r.tone?null:"pe-dark-tone","light"===r.tone?"pe-light-tone":null].join(" ")},[a(n,{className:[c.overlayContent,r.className||r[i.class]].join(" ")},o),a("div",{className:c.mediaDimmer})])}({dispatcher:e,props:p,h:i,a:o});case"primary":return i(d,p);case"text":return function(e){var a=e.props,i=e.h,n=e.a;return i(a.element||"div",r({},t.filterSupportedAttributes(a),{className:[c.text,a.tight?c.textTight:null,a.className||a[n.class]].join(" ")},a.events),a.content)}({props:p,h:i,a:o});case"any":return function(e){var a=e.props,i=e.h,n=e.a;return i(a.element||"div",r({},t.filterSupportedAttributes(a),{className:[c.any,a.tight?c.textTight:null,a.className||a[n.class]].join(" ")}),a.content)}({props:p,h:i,a:o});default:throw'Content type "'.concat(n,'" does not exist')}})):[y.content],_=[y.before].concat(n(h),[y.after]),v=void 0!==y.shadowDepth?y.shadowDepth:y.z,g=[i(p,{shadowDepth:void 0!==v?v:1,animated:!0}),i("div",{className:c.content},_),y.children],b=y.element||y.url?"a":"div";return i(b,f,g)},e._CardActions=function(e){var i=e.h,n=e.a,o=a(e,["h","a"]),s=r({},t.filterSupportedAttributes(o),o.testId&&{"data-test-id":o.testId},{className:[c.actions,"vertical"!==o.layout?m:null,y(o.layout),o.border||o.bordered?c.actionsBorder:null,o.tight?c.actionsTight:null,o.className||o[n.class]].join(" ")},o.events),l=o.content||o.children;return i(o.element||"div",s,l)},e._CardMedia=function(e){var n=e.h,o=e.a,s=e.useEffect,d=e.useState,m=e.getRef,p=a(e,["h","a","useEffect","useState","getRef"]),y=i(d(),2),f=y[0],h=y[1],_=p.ratio||"landscape";s((function(){if(f){var e=p.ratio||"landscape",t=p.origin||"center",r=f.querySelector("img")||f.querySelector("iframe");!function(e){var t=e.dom,r=e.src,a=e.ratio,i=e.origin,n=new Image;n.onload=function(){"IMG"===n.tagName&&(t.style.backgroundImage="url(".concat(n.src,")"));var e=this.naturalWidth/this.naturalHeight<l[a]?c.mediaCropX:c.mediaCropY;t.classList.add(e);var r="start"===i?c.mediaOriginStart:"end"===i?c.mediaOriginEnd:c.mediaOriginCenter;t.classList.add(r)},n.src=r}({dom:f,src:r.src,ratio:e,origin:t})}}),[f]);var v=r({},t.filterSupportedAttributes(p),m((function(e){return e&&!f&&h(e)})),p.testId&&{"data-test-id":p.testId},{className:[c.media,u(p.size),"landscape"===_?c.mediaRatioLandscape:c.mediaRatioSquare,p.className||p[o.class]].join(" ")},p.events),g=p.dispatcher,b=[p.content,p.overlay?g({overlay:p.overlay}):p.showDimmer&&n("div",{className:c.mediaDimmer})];return n(p.element||"div",v,b)},e._CardPrimary=function(e){var i=e.h,n=e.a,o=a(e,["h","a"]),s=Array.isArray(o.content)?o.content.reduce((function(e,t){return"media"===Object.keys(t)[0]||e}),!1):o.media||!1,l=r({},t.filterSupportedAttributes(o),o.testId&&{"data-test-id":o.testId},{className:[c.primary,o.tight?c.primaryTight:null,s?c.primaryHasMedia:null,o.className||o[n.class]].join(" ")},o.events),d=o.dispatcher,u={title:function(e){return e.attrs||e.props?e||e.props:i("div",{className:c.title,style:e.style},[e.title,e.subtitle?i("div",{className:c.subtitle},e.subtitle):null])},media:function(e){return i("div",{className:c.primaryMedia,style:e.style},d({media:e}))},actions:function(e){return d({actions:e})}},m=Array.isArray(o.content)?o.content.map((function(e){var t=Object.keys(e)[0],r=e[t];return u[t]?u[t](r):e})):[o.title?u.title({title:o.title,subtitle:o.subtitle}):null,o.media?u.media(o.media):null,o.actions?u.actions(o.actions):null,o.content];return i(o.element||"div",l,m)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-card.js.map
