{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize, transitionStateReducer } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst showSpinner = opts =>\n  transitionComponent({\n    ...opts,\n    isShow: true\n  });\n\n// const hideSpinner = opts =>\n//   transitionComponent({\n//     ...opts,\n//     isShow: false\n//   });\n\nconst initialTransitionState = {\n  isVisible: false,\n  isTransitioning: false,\n  isHiding: false,\n};\n\nexport const _BaseSpinner = ({ h, a, useReducer, useState, useEffect, getRef, Shadow, ...props }) => {\n  const [transitionState, dispatchTransitionState] = useReducer(transitionStateReducer, initialTransitionState);\n  const [domElement, setDomElement] = useState();\n\n  const isVisible = (transitionState || initialTransitionState).isVisible;\n\n  const transitionOptions = {\n    dispatchTransitionState,\n    props,\n    domElements: {\n      el: domElement,\n    },\n    showClass: classes.visible\n  };\n\n  useEffect(\n    () => {\n      if (!domElement) {\n        return;\n      }\n      if (!props.permanent) {\n        showSpinner(transitionOptions);\n      }\n    },\n    [domElement]\n  );\n\n  const componentProps = Object.assign(\n    {}, \n    filterSupportedAttributes(props),\n    getRef(dom => dom && !domElement && (\n      setDomElement(dom),\n      props.ref && props.ref(dom)\n    )),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.component,\n        props.instanceClass,\n        classForSize(classes, props.size),\n        props.singleColor ? classes.singleColor: null,\n        props.raised ? classes.raised : null,\n        props.animated ? classes.animated : null,\n        props.permanent ? classes.permanent : null,\n        isVisible ? classes.visible : null,\n        props.className || props[a.class],\n      ].join(\" \"),\n    },\n    props.events\n  );\n\n  const content = [\n    props.before,\n    props.content,\n    props.after\n  ];\n\n  if (props.raised && content.length > 0) {\n    content.push(h(Shadow, { shadowDepth: props.shadowDepth }))\n  }\n\n  return h(\"div\",\n    componentProps,\n    content \n  );\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","initialTransitionState","isVisible","isTransitioning","isHiding","h","a","useReducer","useState","useEffect","getRef","Shadow","props","transitionStateReducer","transitionState","dispatchTransitionState","domElement","setDomElement","transitionOptions","domElements","el","showClass","classes","opts","transitionComponent","isShow","componentProps","_extends","filterSupportedAttributes","dom","ref","testId","className","instanceClass","classForSize","size","join","events","content","before","after","length","push","shadowDepth"],"mappings":"0/EACe,CACbA,UAAa,aAGbC,UAAa,wBACbC,YAAa,0BAGbC,SAAa,uBACbC,IAAa,kBACbC,MAAa,oBACbC,OAAa,qBACbC,UAAa,wBACbC,OAAa,qBACbC,QAAa,sBACbC,YAAa,2BACbC,MAAa,oBACbC,QAAa,uBCHTC,EAAyB,CAC7BC,WAAW,EACXC,iBAAiB,EACjBC,UAAU,kBAGgB,gBAAGC,IAAAA,EAAGC,IAAAA,EAAGC,IAAAA,WAAYC,IAAAA,SAAUC,IAAAA,UAAWC,IAAAA,OAAQC,IAAAA,OAAWC,2EACpCL,EAAWM,yBAAwBZ,MAA/Ea,OAAiBC,WACYP,OAA7BQ,OAAYC,OAEbf,GAAaY,GAAmBb,GAAwBC,UAExDgB,EAAoB,CACxBH,wBAAAA,EACAH,MAAAA,EACAO,YAAa,CACXC,GAAIJ,GAENK,UAAWC,EAAQtB,SAGrBS,GACE,WAlCgB,IAAAc,EAmCTP,IAGAJ,EAAMjB,YAtCG4B,EAuCAL,EAtClBM,6BACKD,OACHE,QAAQ,SAuCR,CAACT,QAGGU,EAAiBC,EACrB,GACAC,4BAA0BhB,GAC1BF,GAAO,SAAAmB,UAAOA,IAAQb,IACpBC,EAAcY,GACdjB,EAAMkB,KAAOlB,EAAMkB,IAAID,OAEzBjB,EAAMmB,QAAU,gBAAkBnB,EAAMmB,QACxC,CACEC,UAAW,CACTV,EAAQlC,UACRwB,EAAMqB,cACNC,eAAaZ,EAASV,EAAMuB,MAC5BvB,EAAMd,YAAcwB,EAAQxB,YAAa,KACzCc,EAAMhB,OAAS0B,EAAQ1B,OAAS,KAChCgB,EAAMrB,SAAW+B,EAAQ/B,SAAW,KACpCqB,EAAMjB,UAAY2B,EAAQ3B,UAAY,KACtCO,EAAYoB,EAAQtB,QAAU,KAC9BY,EAAMoB,WAAapB,EAAMN,UACzB8B,KAAK,MAETxB,EAAMyB,QAGFC,EAAU,CACd1B,EAAM2B,OACN3B,EAAM0B,QACN1B,EAAM4B,cAGJ5B,EAAMhB,QAAU0C,EAAQG,OAAS,GACnCH,EAAQI,KAAKrC,EAAEM,EAAQ,CAAEgC,YAAa/B,EAAM+B,eAGvCtC,EAAE,MACPqB,EACAY"}