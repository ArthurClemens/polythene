{"version":3,"file":"polythene-css-shadow.js","sources":["../src/layout.js","../src/vars.js","../src/index.js","../../polythene-css-classes/shadow.js"],"sourcesContent":["// @ts-check\n\nimport { mixin, sel, createLayout } from \"polythene-core-css\";\n\nconst _createShadowForSelector = (which, depth) => (selector, vars) =>\n  [\n    _createRegularShadowForSelector(which, depth, selector, vars),\n    _createActiveShadowForSelector(which, depth, selector, vars)\n  ];\n\nconst _createRegularShadowForSelector = (which, depth, selector, vars) =>\n  sel(selector, {\n    [`.pe-shadow--depth-${depth} .pe-shadow__${which}`]: {\n      boxShadow: vars[`shadow_${which}_depth_${depth}`]\n    }\n  });\n\nconst _createActiveShadowForSelector = (which, depth, selector, vars) => {\n  if (depth === 5) {\n    return [];\n  }\n  const hoverDepth = depth + 1;\n  const hoverSelector = `.pe-with-active-shadow.pe-shadow--depth-${hoverDepth}`;\n  return [\n    sel(`${hoverSelector}:focus ${selector}, ${hoverSelector}:active ${selector}`, {\n      [` .pe-shadow__${which}`]: {\n        boxShadow: vars[`shadow_${which}_depth_${hoverDepth}`], \n      }\n    })\n  ];\n};\n\nconst _createActiveShadowTransition = (selector, vars) =>\n  sel(`.pe-with-active-shadow ${selector}`, {\n    \" .pe-shadow__bottom, .pe-shadow__top\": {\n      transition: vars.transition\n    }\n  });\n\n/**\n * @param {string} selector \n * @param {object} vars \n * @param {number} depth \n * @param {\"top\"|\"bottom\"} which \n */\nconst _createShadow = (selector, vars, depth, which) =>\n  sel(selector, {\n    [` .pe-shadow__${which}`]: {\n      boxShadow: vars[`shadow_${which}_depth_${depth}`]\n    }\n  });\n\n/**\n * @param {string} selector \n * @param {object} vars \n * @param {number} depth\n * @returns {object}\n */\nconst shadow = (selector, vars, depth) => [\n  _createShadow(selector, vars, depth, \"top\"),\n  _createShadow(selector, vars, depth, \"bottom\")\n];\n\n/**\n * @param {string} selector \n * @param {object} vars \n * @returns {object}\n */\nconst shadow_depth = (selector, vars) =>\n  vars.shadow_depth !== undefined\n    ? shadow(selector, vars, vars.shadow_depth)\n    : null;\n\nconst transition = (selector, vars) => [\n  sel(selector, {\n    \".pe-shadow--animated\": {\n      \" .pe-shadow__bottom, .pe-shadow__top\": {\n        transition: vars.transition\n      }\n    }\n  }),\n  _createActiveShadowTransition(selector, vars)\n];\n\nexport const sharedVarFns = {\n  shadow_depth\n};\n\nconst varFns = Object.assign({},\n  {\n    general_styles: (selector, vars) => [\n      sel(selector, [\n        mixin.fit(),\n        shadow(selector, vars, 1),\n        {\n          borderRadius: \"inherit\",\n          pointerEvents: \"none\",\n\n          \" .pe-shadow__bottom, .pe-shadow__top\": [\n            mixin.fit(),\n            {\n              borderRadius: \"inherit\"\n            }\n          ],\n        },\n      ])\n    ],\n    transition,\n    shadow_depth\n  },\n  [0, 1, 2, 3, 4, 5].reduce((acc, depth) => (\n    acc[`shadow_top_depth_${depth}`] = _createShadowForSelector(\"top\", depth),\n    acc[`shadow_bottom_depth_${depth}`] = _createShadowForSelector(\"bottom\", depth),\n    acc\n  ), {}),\n);\n\nexport default createLayout({ varFns });\n","// @ts-check\n\nimport { vars } from \"polythene-theme\";\n\nexport const sharedVars = {\n  shadow_top_depth_0:      \"none\",\n  shadow_bottom_depth_0:   \"none\",\n\n  shadow_top_depth_1:      \"none\",\n  shadow_bottom_depth_1:   \"0 1px 4px 0 rgba(0, 0, 0, 0.37)\",\n\n  shadow_top_depth_2:      \"0 2px 2px 0 rgba(0, 0, 0, 0.2)\",\n  shadow_bottom_depth_2:   \"0 6px 10px 0 rgba(0, 0, 0, 0.3)\",\n\n  shadow_top_depth_3:      \"0 11px 7px 0 rgba(0, 0, 0, 0.19)\",\n  shadow_bottom_depth_3:   \"0 13px 25px 0 rgba(0, 0, 0, 0.3)\",\n\n  shadow_top_depth_4:      \"0 14px 12px 0 rgba(0, 0, 0, 0.17)\",\n  shadow_bottom_depth_4:   \"0 20px 40px 0 rgba(0, 0, 0, 0.3)\",\n\n  shadow_top_depth_5:      \"0 17px 17px 0 rgba(0, 0, 0, 0.15)\",\n  shadow_bottom_depth_5:   \"0 27px 55px 0 rgba(0, 0, 0, 0.3)\",   \n\n  // theme vars\n  shadow_depth:            undefined,\n};\n\nexport default {\n  /**\n   * Generate general styles, not defined by variables\n   */\n  general_styles:          true,\n\n  transition:              `box-shadow ${vars.animation_duration} ease-out`,\n  ...sharedVars\n};\n","// @ts-check\n\nimport classes from \"polythene-css-classes/shadow\";\nimport layout, { sharedVarFns } from \"./layout\";\nimport vars, { sharedVars } from \"./vars\";\nimport { styler } from \"polythene-core-css\";\n\nconst fns = [layout];\nconst selector = `.${classes.component}`;\n\nconst addStyle = styler.createAddStyle(selector, fns, vars);\n\nconst getStyle = styler.createGetStyle(selector, fns, vars);\n\nconst addGeneralStyleToHead = () =>\n  styler.addStyle({\n    selectors: [selector],\n    fns,\n    vars\n  });\n\nexport {\n  addGeneralStyleToHead,\n  addStyle,\n  getStyle,\n  layout,\n  vars,\n  sharedVars,\n  sharedVarFns,\n};\n","\nexport default {\n  component:          \"pe-shadow\",\n      \n  // elements      \n  bottomShadow:       \"pe-shadow__bottom\",\n  topShadow:          \"pe-shadow__top\",\n\n  // states\n  animated:           \"pe-shadow--animated\",\n  depth_n:            \"pe-shadow--depth-\",\n  with_active_shadow: \"pe-with-active-shadow\",\n};\n"],"names":["_createShadowForSelector","which","depth","selector","vars","_createRegularShadowForSelector","_createActiveShadowForSelector","sel","boxShadow","hoverDepth","hoverSelector","_createActiveShadowTransition","transition","_createShadow","shadow","shadow_depth","undefined","sharedVarFns","varFns","_extends","general_styles","mixin","fit","borderRadius","pointerEvents","reduce","acc","createLayout","sharedVars","shadow_top_depth_0","shadow_bottom_depth_0","shadow_top_depth_1","shadow_bottom_depth_1","shadow_top_depth_2","shadow_bottom_depth_2","shadow_top_depth_3","shadow_bottom_depth_3","shadow_top_depth_4","shadow_bottom_depth_4","shadow_top_depth_5","shadow_bottom_depth_5","animation_duration","fns","layout","addStyle","styler","createAddStyle","getStyle","createGetStyle","selectors"],"mappings":"i4BAIMA,EAA2B,SAACC,EAAOC,UAAU,SAACC,EAAUC,SAC5D,CACEC,EAAgCJ,EAAOC,EAAOC,EAAUC,GACxDE,EAA+BL,EAAOC,EAAOC,EAAUC,MAGrDC,EAAkC,SAACJ,EAAOC,EAAOC,EAAUC,UAC/DG,MAAIJ,mCACoBD,0BAAqBD,GAAU,CACnDO,UAAWJ,mBAAeH,oBAAeC,QAIzCI,EAAiC,SAACL,EAAOC,EAAOC,EAAUC,MAChD,IAAVF,QACK,OAEHO,EAAaP,EAAQ,EACrBQ,oDAA2DD,SAC1D,CACLF,gBAAOG,oBAAuBP,eAAaO,qBAAwBP,+BAChDF,GAAU,CACzBO,UAAWJ,mBAAeH,oBAAeQ,SAM3CE,EAAgC,SAACR,EAAUC,UAC/CG,uCAA8BJ,GAAY,wCACA,CACtCS,WAAYR,EAAKQ,eAUjBC,EAAgB,SAACV,EAAUC,EAAMF,EAAOD,UAC5CM,MAAIJ,8BACeF,GAAU,CACzBO,UAAWJ,mBAAeH,oBAAeC,QAUzCY,EAAS,SAACX,EAAUC,EAAMF,SAAU,CACxCW,EAAcV,EAAUC,EAAMF,EAAO,OACrCW,EAAcV,EAAUC,EAAMF,EAAO,YAQjCa,EAAe,SAACZ,EAAUC,eACRY,IAAtBZ,EAAKW,aACDD,EAAOX,EAAUC,EAAMA,EAAKW,cAC5B,MAaOE,EAAe,CAC1BF,aAAAA,GAGIG,EAASC,EAAc,GAC3B,CACEC,eAAgB,SAACjB,EAAUC,SAAS,CAClCG,MAAIJ,EAAU,CACZkB,QAAMC,MACNR,EAAOX,EAAUC,EAAM,GACvB,CACEmB,aAAc,UACdC,cAAe,8CAEyB,CACtCH,QAAMC,MACN,CACEC,aAAc,iBAMxBX,WAlCe,SAACT,EAAUC,SAAS,CACrCG,MAAIJ,EAAU,wBACY,wCACkB,CACtCS,WAAYR,EAAKQ,eAIvBD,EAA8BR,EAAUC,KA2BtCW,aAAAA,GAEF,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGU,QAAO,SAACC,EAAKxB,UAC9BwB,6BAAwBxB,IAAWF,EAAyB,MAAOE,GACnEwB,gCAA2BxB,IAAWF,EAAyB,SAAUE,GACzEwB,IACC,OAGUC,eAAa,CAAET,OAAAA,ICjHjBU,EAAa,CACxBC,mBAAyB,OACzBC,sBAAyB,OAEzBC,mBAAyB,OACzBC,sBAAyB,kCAEzBC,mBAAyB,iCACzBC,sBAAyB,kCAEzBC,mBAAyB,mCACzBC,sBAAyB,mCAEzBC,mBAAyB,oCACzBC,sBAAyB,mCAEzBC,mBAAyB,oCACzBC,sBAAyB,mCAGzBzB,kBAAyBC,sVAOzBI,gBAAyB,EAEzBR,gCAAuCR,OAAKqC,iCACzCb,GC3BCc,EAAM,CAACC,GACPxC,aCNgB,aDQhByC,EAAWC,SAAOC,eAAe3C,EAAUuC,EAAKtC,GAEhD2C,EAAWF,SAAOG,eAAe7C,EAAUuC,EAAKtC,2BAExB,kBAC5ByC,SAAOD,SAAS,CACdK,UAAW,CAAC9C,GACZuC,IAAAA,EACAtC,KAAAA"}