!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={},e["polythene-core"])}(this,(function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={component:"pe-dialog",placeholder:"pe-dialog__placeholder",holder:"pe-dialog__holder",content:"pe-dialog__content",backdrop:"pe-dialog__backdrop",touch:"pe-dialog__touch",fullScreen:"pe-dialog--full-screen",modal:"pe-dialog--modal",open:"pe-dialog--open",visible:"pe-dialog--visible",showBackdrop:"pe-dialog--backdrop",transition:"pe-dialog--transition",menuContent:"pe-menu__content"},c=".".concat(l.component);e._Dialog=function(e){var i,c=e.h,s=e.a,u=e.useState,p=e.useEffect,d=e.useRef,f=e.getRef,h=e.useReducer,y=e.Pane,m=e.Shadow,b=e.openDialogsSelector,g=o(e,["h","a","useState","useEffect","useRef","getRef","useReducer","Pane","Shadow","openDialogsSelector"]),S=a(h(t.transitionStateReducer,t.initialTransitionState),2),v=S[0],w=S[1],O=a(u(),2),k=O[0],_=O[1],j=d(),C=d(),D=d(),P=(v||t.initialTransitionState).isVisible,E=(v||t.initialTransitionState).isTransitioning,N=function(e){var t=e.isShow,n=e.hideDelay,o=void 0===n?g.hideDelay:n,a=e.referrer;return{transitionState:v,dispatchTransitionState:w,instanceId:g.instanceId,props:r({},g,{hideDelay:o}),isShow:t,domElements:{el:k,contentEl:D.current,backdropEl:j.current},showClass:l.visible,transitionClass:l.transition,referrer:a}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.hideDelay,r=e.referrer;return t.transitionComponent(N({isShow:!1,hideDelay:n,referrer:r}))},I=function(){return g.modal||k&&k.classList.contains(l.modal)||t.stylePropCompare({element:k,pseudoSelector:":before",prop:"content",contains:'"'.concat("modal",'"')})};p((function(){k&&(j.current=k.querySelector(".".concat(l.backdrop)),C.current=k.querySelector(".".concat(l.touch)),D.current=k.querySelector(".".concat(l.content)))}),[k]),p((function(){if(k&&!g.inactive){var e=function e(n){if(!(g.disableEscape&&(g.fullScreen||k&&k.classList.contains(l.fullScreen)||t.stylePropCompare({element:k,pseudoSelector:":before",prop:"content",contains:'"'.concat("full_screen",'"')})||I())||"Escape"!==n.key&&"Esc"!==n.key)){var r=document.querySelectorAll(b);r[r.length-1]===k&&(A(),t.unsubscribe("keydown",e))}};return t.subscribe("keydown",e),function(){t.unsubscribe("keydown",e)}}}),[k,g.inactive]),p((function(){k&&!E&&(g.hide?P&&A():g.show&&(P||t.transitionComponent(N({isShow:!0}))))}),[k,E,P,g.hide,g.show]);var T=r({},t.filterSupportedAttributes(g,{remove:["style"]}),f((function(e){return e&&!k&&(_(e),g.ref&&g.ref(e))})),(n(i={className:[g.parentClassName||l.component,g.fromMultipleClassName,g.fullScreen?l.fullScreen:null,g.modal?l.modal:null,g.backdrop?l.showBackdrop:null,"dark"===g.tone?"pe-dark-tone":null,"light"===g.tone?"pe-light-tone":null,g.className||g[s.class]].join(" "),"data-spawn-id":g.spawnId,"data-instance-id":g.instanceId},s.onclick,(function(e){e.target!==k&&e.target!==j.current&&e.target!==C.current||I()||A()})),n(i,"role","dialog"),i)),R=g.panesOptions&&g.panesOptions.length?c(y,g.panesOptions[0]):g.panes&&g.panes.length?g.panes[0]:function(e){var t=e.h,n=e.Pane,r=e.props;return t(n,{body:r.content||r.body||r.menu||r.children,element:r.element,borders:r.borders,className:r.className,footer:r.footer,footerButtons:r.footerButtons,formOptions:r.formOptions,fullBleed:r.fullBleed,header:r.header,style:r.style,title:r.title})}({h:c,Pane:y,props:g}),x=g.shadowDepth,B=[c("div",{className:l.backdrop}),c("div",{className:l.touch}),c("div",{className:[l.content,g.menu?l.menuContent:null].join(" ")},[g.fullScreen?null:c(m,{shadowDepth:void 0!==x?x:3,animated:!0}),g.before,R,g.after])];return c("div",T,B)},e.openDialogsSelector=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-dialog.js.map
