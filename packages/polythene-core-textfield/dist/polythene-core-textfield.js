!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={},e["polythene-core"])}(this,(function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,l,i=[],u=!0,a=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);u=!0);}catch(e){a=!0,l=e}finally{try{u||null==r.return||r.return()}finally{if(a)throw l}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c={component:"pe-textfield",counter:"pe-textfield__counter",error:"pe-textfield__error",errorPlaceholder:"pe-textfield__error-placeholder",focusHelp:"pe-textfield__help-focus",help:"pe-textfield__help",input:"pe-textfield__input",inputArea:"pe-textfield__input-area",label:"pe-textfield__label",optionalIndicator:"pe-textfield__optional-indicator",requiredIndicator:"pe-textfield__required-indicator",hasCounter:"pe-textfield--counter",hasFloatingLabel:"pe-textfield--floating-label",hasFullWidth:"pe-textfield--full-width",hideClear:"pe-textfield--hide-clear",hideSpinner:"pe-textfield--hide-spinner",hideValidation:"pe-textfield--hide-validation",isDense:"pe-textfield--dense",isRequired:"pe-textfield--required",stateDirty:"pe-textfield--dirty",stateDisabled:"pe-textfield--disabled",stateFocused:"pe-textfield--focused",stateInvalid:"pe-textfield--invalid",stateReadonly:"pe-textfield--readonly"},d={invalid:!1,message:void 0},s=function(e,t){return e.ignoreEvents&&-1!==e.ignoreEvents.indexOf(t)};e._TextField=function(e){var r=e.h,o=e.a,f=e.useState,p=e.useEffect,v=e.useRef,y=e.getRef,h=u(e,["h","a","useState","useEffect","useRef","getRef"]),b=void 0!==h.defaultValue&&null!==h.defaultValue?h.defaultValue.toString():void 0!==h.value&&null!==h.value?h.value.toString():"",m=a(f(),2),g=m[0],x=m[1],O=a(f(!1),2),j=O[0],S=O[1],_=a(f(b),2),k=_[0],w=_[1],q=v(),I=v(),P=v(),A=v(""!==b),N=v(!1),E=v(!1),C=v(h.error),D=h.multiLine?"textarea":"input",F=!!(void 0!==h.valid||h.validate||h.min||h.max||h[o.minlength]||h[o.maxlength]||h.required||h.pattern),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.focus,n=e.value;q.current&&(void 0!==n&&(q.current.value=n),void 0!==r&&(N.current=r,r?q.current.focus():q.current.blur()),"input"===t&&(h.validateOnInput||h.counter)&&(E.current=q.current.value!==b),"input"!==t&&(E.current=q.current.value!==b),"onblur"===t&&(E.current=!0),A.current=""!==q.current.value,L(),T(),I.current!==q.current.value&&w(q.current.value))},V=function(){var e=d;return E.current&&j&&0===q.current.value.length&&h.validateResetOnClear&&(E.current=!1,S(!1),C.current=void 0),h.counter&&(e={invalid:q.current.value.length>h.counter,message:h.error}),!e.invalid&&q.current.checkValidity&&(e={invalid:!q.current.checkValidity(),message:h.error}),!e.invalid&&h.validate&&(e=function(){if(!q.current)return d;var e=h.validate(q.current.value);return{invalid:e&&!e.valid,message:e&&e.error}}()),e},L=function(){var e=void 0!==h.valid?{invalid:!h.valid,message:h.error}:E.current||h.validateAtStart?V():d,t=j;C.current=e.message,e.invalid!==t&&S(e.invalid),e.invalid||(C.current=void 0)},T=function(){if(h.onChange){var e=V(),t={focus:N.current,dirty:A.current,invalid:e.invalid,error:e.error,value:q.current.value};JSON.stringify(t)!==JSON.stringify(P.current)&&(h.onChange(n(n({},t),{},{el:q.current,setInputState:function(e){var t=void 0!==e.value&&e.value!==q.current.value,r=void 0!==e.focus&&e.focus!==N.current;(t||r)&&R(e)}})),P.current=t)}};p((function(){g&&(q.current=g.querySelector(D),q.current.value=b,R(),L(),T())}),[g]),p((function(){if(q.current){var e=void 0!==h.value&&null!==h.value?h.value:q.current?q.current.value:I.current,t=null==e?"":e.toString();q.current&&I.current!==t&&(q.current.value=t,I.current=t,R({type:"input"}))}}),[q.current,h.value]),p((function(){q.current&&(L(),T())}),[h,q.current&&q.current.value]);var H=i({},t.filterSupportedAttributes(h),h.testId&&{"data-test-id":h.testId},y((function(e){return e&&!g&&(x(e),h.ref&&h.ref(e))})),{className:[c.component,j?c.stateInvalid:"",N.current?c.stateFocused:"",A.current?c.stateDirty:"",h.floatingLabel?c.hasFloatingLabel:"",h.disabled?c.stateDisabled:"",h.readonly?c.stateReadonly:"",h.dense?c.isDense:"",h.required?c.isRequired:"",h.fullWidth?c.hasFullWidth:"",h.counter?c.hasCounter:"",!1!==h.hideSpinner&&void 0!==h.hideSpinner?c.hideSpinner:"",!1!==h.hideClear&&void 0!==h.hideClear?c.hideClear:"",h.hideValidation?c.hideValidation:"","dark"===h.tone?"pe-dark-tone":null,"light"===h.tone?"pe-light-tone":null,h.className||h[o.class]].join(" ")}),W=n(n({},h),h.domAttributes),J=h.error||C.current,M=W.multiLine?null:W.type&&"submit"!==W.type&&"search"!==W.type?W.type:"text",U=j&&void 0!==J,$=W.disabled||W[o.readonly],z=W.required&&""!==W.requiredIndicator?r("span",{key:"required",className:c.requiredIndicator},W.requiredIndicator||"*"):null,B=!W.required&&W.optionalIndicator?r("span",{key:"optional",className:c.optionalIndicator},W.optionalIndicator):null,G=W.label?[W.label,z,B]:null,K=[r("div",{className:c.inputArea,key:"input-area"},[G?r("label",{key:"label",className:c.label},G):null,r(D,i({},{key:"input",className:c.input,disabled:W.disabled},M?{type:M}:null,W.name?{name:W.name}:null,s(W,o.onclick)?null:l({},o.onclick,(function(){$||R({focus:!0})})),s(W,o.onfocus)?null:l({},o.onfocus,(function(){$||(R({focus:!0}),g&&g.classList.add(c.stateFocused))})),s(W,o.onblur)?null:l({},o.onblur,(function(){R({type:"onblur",focus:!1}),g.classList.remove(c.stateFocused)})),s(W,o.oninput)?null:l({},o.oninput,(function(e){R({type:"input"})})),s(W,o.onkeydown)?null:l({},o.onkeydown,(function(e){"Enter"===e.key?E.current=!0:"Escape"!==e.key&&"Esc"!==e.key||R({focus:!1})})),W.events?W.events:null,void 0!==W.required&&W.required?{required:!0}:null,void 0!==W[o.readonly]&&W[o.readonly]?l({},o.readonly,!0):null,void 0!==W.pattern?{pattern:W.pattern}:null,void 0!==W[o.maxlength]?l({},o.maxlength,W[o.maxlength]):null,void 0!==W[o.minlength]?l({},o.minlength,W[o.minlength]):null,void 0!==W.max?{max:W.max}:null,void 0!==W.min?{min:W.min}:null,void 0!==W[o.autofocus]?l({},o.autofocus,W[o.autofocus]):null,void 0!==W[o.tabindex]?l({},o.tabindex,W[o.tabindex]):null,void 0!==W.rows?{rows:W.rows}:null,void 0!==W.placeholder?{placeholder:W.placeholder}:null,void 0!==W.domAttributes?n({},W.domAttributes):null))]),W.counter?r("div",{key:"counter",className:c.counter},(k.length||0)+" / "+W.counter):null,W.help&&!U?r("div",{key:"help",className:[c.help,W.focusHelp?c.focusHelp:null].join(" ")},W.help):null,U?r("div",{key:"error",className:c.error},J):F&&!W.help?r("div",{key:"error-placeholder",className:c.errorPlaceholder}):null],Q=[h.before,K,h.after];return r(h.element||"div",H,Q)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-textfield.js.map
