!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={},e["polythene-core"])}(this,(function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,l,i=[],u=!0,o=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);u=!0);}catch(e){o=!0,l=e}finally{try{u||null==r.return||r.return()}finally{if(o)throw l}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c={component:"pe-textfield",counter:"pe-textfield__counter",error:"pe-textfield__error",errorPlaceholder:"pe-textfield__error-placeholder",focusHelp:"pe-textfield__help-focus",help:"pe-textfield__help",input:"pe-textfield__input",inputArea:"pe-textfield__input-area",label:"pe-textfield__label",optionalIndicator:"pe-textfield__optional-indicator",requiredIndicator:"pe-textfield__required-indicator",hasCounter:"pe-textfield--counter",hasFloatingLabel:"pe-textfield--floating-label",hasFullWidth:"pe-textfield--full-width",hideClear:"pe-textfield--hide-clear",hideSpinner:"pe-textfield--hide-spinner",hideValidation:"pe-textfield--hide-validation",isDense:"pe-textfield--dense",isRequired:"pe-textfield--required",stateDirty:"pe-textfield--dirty",stateDisabled:"pe-textfield--disabled",stateFocused:"pe-textfield--focused",stateInvalid:"pe-textfield--invalid",stateReadonly:"pe-textfield--readonly"},d={invalid:!1,message:void 0},s=function(e,t){return e.ignoreEvents&&-1!==e.ignoreEvents.indexOf(t)};e._TextField=function(e){var r=e.h,a=e.a,f=e.useState,p=e.useEffect,v=e.useRef,h=e.getRef,y=u(e,["h","a","useState","useEffect","useRef","getRef"]),b=v(t.createUid()),m=void 0!==y.defaultValue&&null!==y.defaultValue?y.defaultValue.toString():void 0!==y.value&&null!==y.value?y.value.toString():"",g=o(f(),2),x=g[0],O=g[1],j=o(f(!1),2),S=j[0],_=j[1],w=o(f(!1),2)[1],I=o(f(m),2),k=I[0],q=I[1],P=v(),A=v(),N=v(),D=v(),E=v(),C=v(),F=v(),R=y.multiLine?"textarea":"input",V=!!(void 0!==y.valid||y.validate||y.min||y.max||y[a.minlength]||y[a.maxlength]||y.required||y.pattern),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.focus,n=e.value;P.current&&(void 0!==n&&(P.current.value=n),void 0!==r&&(E.current=r,w(r),r?P.current.focus():P.current.blur()),"input"===t&&(y.validateOnInput||y.counter)&&(C.current=P.current.value!==m),"input"!==t&&(C.current=P.current.value!==m),"onblur"===t&&(C.current=!0),D.current=""!==P.current.value,H(),W(),A.current!==P.current.value&&q(P.current.value))},T=function(){var e=d;return C.current&&S&&0===P.current.value.length&&y.validateResetOnClear&&(C.current=!1,_(!1),F.current=void 0),y.counter&&(e={invalid:P.current.value.length>y.counter,message:y.error}),!e.invalid&&P.current.checkValidity&&(e={invalid:!P.current.checkValidity(),message:y.error}),!e.invalid&&y.validate&&(e=function(){if(!P.current)return d;var e=y.validate(P.current.value);return{invalid:e&&!e.valid,message:e&&e.error}}()),e},H=function(){var e=void 0!==y.valid?{invalid:!y.valid,message:y.error}:C.current||y.validateAtStart?T():d,t=S;F.current=e.message,e.invalid!==t&&_(e.invalid),e.invalid||(F.current=void 0)},W=function(){if(y.onChange){var e=T(),t={focus:E.current,dirty:D.current,invalid:e.invalid,error:e.error,value:P.current.value};JSON.stringify(t)!==JSON.stringify(N.current)&&(y.onChange(n(n({},t),{},{el:P.current,setInputState:function(e){var t=void 0!==e.value&&e.value!==P.current.value,r=void 0!==e.focus&&e.focus!==E.current;(t||r)&&L(e)}})),N.current=t)}},J=n(n({},y),y.domAttributes),M=y.error||F.current,U=J.multiLine?null:J.type&&"submit"!==J.type&&"search"!==J.type?J.type:"text",$=S&&void 0!==M,z=J.disabled||J[a.readonly],B=J.required&&""!==J.requiredIndicator?r("span",{className:c.requiredIndicator},J.requiredIndicator||"*"):null,G=!J.required&&J.optionalIndicator?r("span",{className:c.optionalIndicator},J.optionalIndicator):null,K=J.label?[J.label,B,G]:null,Q=J.events||{},X=[r("div",{className:c.inputArea},[K?r("label",l({className:c.label},a.for,b.current),K):null,r(R,i({},{className:c.input,disabled:J.disabled,id:b.current},U?{type:U}:null,J.name?{name:J.name}:null,J.aria,Q,s(J,a.onclick)?null:l({},a.onclick,(function(e){z||(L({focus:!0}),Q[a.onclick]&&Q[a.onclick](e))})),s(J,a.onfocus)?null:l({},a.onfocus,(function(e){z||(L({focus:!0}),x&&x.classList.add(c.stateFocused),Q[a.onfocus]&&Q[a.onfocus](e))})),s(J,a.onblur)?null:l({},a.onblur,(function(e){L({type:"onblur",focus:!1}),x.classList.remove(c.stateFocused),Q[a.onblur]&&Q[a.onblur](e)})),s(J,a.oninput)?null:l({},a.oninput,(function(e){L({type:"input"}),Q[a.oninput]&&Q[a.oninput](e)})),s(J,a.onkeydown)?null:l({},a.onkeydown,(function(e){"Enter"===e.key?C.current=!0:"Escape"!==e.key&&"Esc"!==e.key||L({focus:!1}),Q[a.onkeydown]&&Q[a.onkeydown](e)})),void 0!==J.required&&J.required?{required:!0}:null,void 0!==J[a.readonly]&&J[a.readonly]?l({},a.readonly,!0):null,void 0!==J.pattern?{pattern:J.pattern}:null,void 0!==J[a.maxlength]?l({},a.maxlength,J[a.maxlength]):null,void 0!==J[a.minlength]?l({},a.minlength,J[a.minlength]):null,void 0!==J.max?{max:J.max}:null,void 0!==J.min?{min:J.min}:null,void 0!==J[a.autofocus]?l({},a.autofocus,J[a.autofocus]):null,void 0!==J[a.tabindex]?l({},a.tabindex,J[a.tabindex]):null,void 0!==J.rows?{rows:J.rows}:null,void 0!==J.placeholder?{placeholder:J.placeholder}:null,void 0!==J.domAttributes?n({},J.domAttributes):null))]),J.counter?r("div",{className:c.counter},(k.length||0)+" / "+J.counter):null,J.help&&!$?r("div",{className:[c.help,J.focusHelp?c.focusHelp:null].join(" ")},J.help):null,$?r("div",{className:c.error},M):V&&!J.help?r("div",{className:c.errorPlaceholder}):null];p((function(){D.current=""!==m,E.current=!1,C.current=!1,F.current=y.error}),[]),p((function(){x&&(P.current=x.querySelector(R),P.current.value=m,J[a.autofocus]?L({focus:!0}):L(),H(),W())}),[x]),p((function(){if(P.current){var e=void 0!==y.value&&null!==y.value?y.value:P.current?P.current.value:A.current,t=null==e?"":e.toString();P.current&&A.current!==t&&(P.current.value=t,A.current=t,L({type:"input"}))}}),[P.current,y.value]),p((function(){P.current&&(H(),W())}),[y,P.current&&P.current.value]);var Y=i({},t.filterSupportedAttributes(y),t.processDataset(y),y.testId&&{"data-test-id":y.testId},h((function(e){return e&&!x&&(O(e),y.ref&&y.ref(e))})),{className:[c.component,S?c.stateInvalid:"",E.current?c.stateFocused:"",D.current?c.stateDirty:"",y.floatingLabel?c.hasFloatingLabel:"",y.disabled?c.stateDisabled:"",y.readonly?c.stateReadonly:"",y.dense?c.isDense:"",y.required?c.isRequired:"",y.fullWidth?c.hasFullWidth:"",y.counter?c.hasCounter:"",!1!==y.hideSpinner&&void 0!==y.hideSpinner?c.hideSpinner:"",!1!==y.hideClear&&void 0!==y.hideClear?c.hideClear:"",y.hideValidation?c.hideValidation:"","dark"===y.tone?"pe-dark-tone":null,"light"===y.tone?"pe-light-tone":null,y.className||y[a.class]].join(" ")}),Z=[y.before].concat(X,[y.after]);return r(y.element||"div",Y,Z)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-textfield.js.map
