!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("nanoid")):"function"==typeof define&&define.amd?define(["exports","nanoid"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={},e.nanoid)}(this,(function(e,n){"use strict";function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function i(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(n){o(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==t)return;var i,o,r=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(i=t.next()).done)&&(r.push(i.value),!n||r.length!==n);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw o}}return r}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var s="hidden",d="visible",c="exposing",l="hiding",f=function(e,n){return e[n]=1,e},m=["key","style","href","id","data-index","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],p=function(e){return"function"==typeof e?e():e},h=function(e){return{small:e.small,regular:e.regular,medium:e.medium,large:e.large,fab:e.fab}},v="undefined"!=typeof document,w=!v,y={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},g=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=e.equals,a=e.contains,u=t?n.querySelector(t):n;if(!u)return!1;var s=document.defaultView;if(s){if(void 0!==r)return r===s.getComputedStyle(u,i).getPropertyValue(o);if(void 0!==a)return-1!==s.getComputedStyle(u,i).getPropertyValue(o).indexOf(a)}return!1},b=function(e){var n=parseFloat(e)*(-1===e.indexOf("ms")?1e3:1);return isNaN(n)?0:n},S=!w&&"ontouchstart"in document.documentElement,O=S?["touchstart","click"]:["click"],E=S?["click","mouseup"]:["mouseup"],D=S?["touchstart","mousedown"]:["mousedown"],C=S?["touchmove","mousemove"]:["mousemove"],P=S?["touchend","mouseup"]:["mouseup"];if(v){var T=document.querySelector("html");T&&T.classList.add(S?"pe-touch":"pe-no-touch")}var j={},I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v?window:{},i=!1;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];var u=function(){return e.apply(t,r)};i||(u(),i=!0,setTimeout((function(){return i=!1}),n))}},x=function(e,n,t){j[e]=j[e]||[],j[e].push(t?I(n,t):n)},k=function(e,n){if(j[e]){var t=j[e].indexOf(n);t>-1&&j[e].splice(t,1)}},M=function(e,n){j[e]&&j[e].forEach((function(e){return e(n)}))};v&&(window.addEventListener("resize",(function(e){return M("resize",e)})),window.addEventListener("scroll",(function(e){return M("scroll",e)})),window.addEventListener("keydown",(function(e){return M("keydown",e)})),E.forEach((function(e){return window.addEventListener(e,(function(n){return M(e,n)}))})));var A=function(e){var n=e.options,t=[],o=function(e){M(n.name,e)},u=function(e){var n=c(e);return t.indexOf(n)},s=function(e){var n=u(e);-1!==n&&(t.splice(n,1),o({id:e,name:"removeItem"}))},d=function(e,n){var i=u(e);-1!==i&&(t[i]=n)},c=function(e){for(var n=0;n<t.length;n++)if(t[n].instanceId===e)return t[n]},l=function(){t.length&&(t[0].show=!0),o({id:t.length?t[0].instanceId:null,name:"next"})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;n.queue?(t.shift(),l()):s(e)},m=function(e,n){var t=c(n);t&&(t.pause=e,t.unpause=!e,o({id:n,name:e?"pause":"unpause"}))},h=function(e,t,r){var a,u,s=p(e),d=new Promise((function(e){return a=e})),c=new Promise((function(e){return u=e}));return i(i({},n),{},{instanceId:t,spawn:r,props:e,show:!n.queue,showPromise:d,hidePromise:c,didShow:function(){return s.didShow&&s.didShow(t),o({id:t,name:"didShow"}),a(t)},didHide:function(){return s.didHide&&s.didHide(t),o({id:t,name:"didHide"}),f(t),u(t)}})},w=function(){t.length=0,o({id:null,name:"removeAll"})};return{clear:w,count:function(){return t.length},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id||n.defaultId,r=n.queue&&t.length?t[0]:c(i);return r&&(r.hide=!0),o({id:i,name:"hide"}),r?r.hidePromise:Promise.resolve(i)},pause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;return m(!0,e)},remove:f,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.id||n.defaultId,a=i.spawn||n.defaultId,u=h(e,r,a);if(o({id:r,name:"show"}),n.queue)t.push(u),1===t.length&&l();else{var s=c(r);s?d(r,u):t.push(u)}return u.showPromise},unpause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;return m(!1,e)},render:function(e){var o=e.h,u=e.useState,s=e.useEffect,d=r(e,["h","useState","useEffect"]),c=a(u(),2)[1];s((function(){return x(n.name,c),function(){k(n.name,c)}}),[]);var l=d.spawn||n.defaultId,f=t.filter((function(e){return e.show&&e.spawn===l}));return n.htmlShowClass&&v&&document.documentElement&&document.documentElement.classList[f.length?"add":"remove"](n.htmlShowClass),f.length?o(n.holderSelector,{className:"container"===d.position?"pe-multiple--container":"pe-multiple--screen"},f.map((function(e){return o(n.instance,i(i({},p(d)),{},{fromMultipleClear:w,spawnId:l,fromMultipleClassName:n.className,holderSelector:n.holderSelector,transitions:n.transitions,fromMultipleDidHide:e.didHide,fromMultipleDidShow:e.didShow,hide:e.hide,instanceId:e.instanceId,key:void 0!==e.key?e.key:e.keyId,pause:e.pause,show:e.show,unpause:e.unpause},p(e.props)))}))):o(n.placeholder)}}};A.displayName="Multi";var H="show",q="hide",L="show-done",V="hide-done",F=function(e){return U(e,"show")},N=function(e){return U(e,"hide")},U=function(e,n){var t=e.el;return t?new Promise((function(i){var o=t.style,r=v?window.getComputedStyle(t):{},a=e.hasDuration&&void 0!==e.duration?1e3*e.duration:b(r.transitionDuration),u=e.hasDelay&&void 0!==e.delay?1e3*e.delay:b(r.transitionDelay),s=e.timingFunction||r.transitionTimingFunction;e.transitionClass&&t.classList.add(e.transitionClass);var d=function(){o.transitionDuration="0ms",o.transitionDelay="0ms",e.before&&"function"==typeof e.before&&e.before()},c=e.before&&"show"===n||e.before&&"hide"===n?d:null,l=function(){e.after&&"function"==typeof e.after&&e.after()},f=function(){o.transitionDuration=a+"ms",o.transitionDelay=u+"ms",s&&(o.transitionTimingFunction=s),e.showClass&&(e.showClassElement||t).classList["show"===n?"add":"remove"](e.showClass),e.transition&&e.transition(),setTimeout((function(){l&&l(),e.transitionClass&&(t.classList.remove(e.transitionClass),t.offsetHeight),i()}),a+u)},m=function(){0===a?f():setTimeout(f,0)};c?(c(),t.offsetHeight,setTimeout((function(){m()}),0)):m()})):Promise.resolve()},z=n.nanoid;e.Multi=A,e._Conditional=function(e){var n=e.h,t=e.useState,o=e.useEffect,u=r(e,["h","useState","useEffect"]),f=a(t(u.permanent||u.permanent||u.show?d:s),2),m=f[0],p=f[1];o((function(){var e=m;u.permanent?m===d&&u.show?e=c:m!==c||u.show||(e=l):m===s&&u.show?e=d:m!==d||u.show||(e=l),e!==m&&p(e)}),[u]);var h=n("span",{className:u.placeholderClassName});return u.didHide?m!==s?n(u.instance,i(i({},u),{},{didHide:function(e){return u.didHide(e),p(u.permanent?d:s)}},m===l?{show:!0,hide:!0}:void 0)):h:u.permanent||u.inactive||u.show?n(u.instance,u):h},e.classForSize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return h(e)[n]},e.createUid=z,e.deprecation=function(e,n){var t=n.option,i=n.newOption,o=n.newComponent,r=n.since,a=r?"Since version ".concat(r,"."):"";return t&&console.warn("".concat(e,": option '").concat(t,"' is deprecated and will be removed in later versions. Use '").concat(i,"' instead. ").concat(a)),o&&!i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' instead. ").concat(a)),o&&i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' with option '").concat(i,"' instead. ").concat(a))},e.emit=M,e.filterSupportedAttributes=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.add,r=n.remove,a=r?r.reduce(f,{}):{},u=t?m.concat(t):m,s=u.filter((function(e){return!a[e]})).reduce(f,{});return Object.keys(e).reduce((function(n,t){return s[t]?i(i({},n),{},o({},t,e[t])):n}),{})},e.getAnimationEndEvent=function(){if(v){var e=document.createElement("fakeelement");for(var n in y){if(void 0!==e.style[n])return y[n]}}},e.getStyle=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=t?n.querySelector(t):n;if(r){if(r.currentStyle)return r.currentStyle;if(window.getComputedStyle){var a=document.defaultView;if(a){var u=a.getComputedStyle(r,i);if(u)return u.getPropertyValue(o)}}}},e.hide=N,e.iconDropdownDown='<svg xmlns="http://www.w3.org/2000/svg" id="dd-down-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',e.iconDropdownUp='<svg xmlns="http://www.w3.org/2000/svg" id="dd-up-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>',e.initialTransitionState={isVisible:!1,isTransitioning:!1},e.isClient=v,e.isRTL=function(e){var n=e.element,t=void 0===n?document:n,i=e.selector;return g({element:t,selector:i,prop:"direction",equals:"rtl"})},e.isServer=w,e.isTouch=S,e.pointerEndDownEvent=P,e.pointerEndEvent=E,e.pointerMoveEvent=C,e.pointerStartDownEvent=D,e.pointerStartEvent=O,e.processDataset=function(e){return e.dataSet?Object.keys(e.dataSet).reduce((function(n,t){return i(i({},n),{},o({},"data-".concat(t),e.dataSet[t]))}),{}):void 0},e.show=F,e.styleDurationToMs=b,e.stylePropCompare=g,e.subscribe=x,e.throttle=I,e.transitionComponent=function(e){var n=e.dispatchTransitionState,t=e.isTransitioning,o=e.instanceId,r=e.isShow,a=e.props,u=e.domElements,s=e.beforeTransition,d=e.afterTransition,c=e.showClass,l=e.transitionClass;if(e.referrer,t)return Promise.resolve();n(r?H:q),s&&s();var f=r?a.showDuration:a.hideDuration,m=r?a.showDelay:a.hideDelay,p=r?a.showTimingFunction:a.hideTimingFunction,h=a.transitions,v=r?F:N,w=i(i(i({},a),u),{},{showClass:c,transitionClass:l,duration:f,delay:m,timingFunction:p}),y=i(i({},w),h?(r?h.show:h.hide)(w):void 0);return v(i(i({},y),{duration:void 0!==y.duration?y.duration:.24,hasDuration:void 0!==y.duration,delay:void 0!==y.delay?y.delay:0,hasDelay:void 0!==y.delay})).then((function(){var e=o;d&&d(),(r?a.fromMultipleDidShow:a.fromMultipleDidHide)?(r?a.fromMultipleDidShow:a.fromMultipleDidHide)(e):(r?a.didShow:a.didHide)&&(r?a.didShow:a.didHide)(e),n(r?L:V)}))},e.transitionStateReducer=function(e,n){switch(n){case H:return i(i({},e),{},{isTransitioning:!0,isVisible:!0});case q:return i(i({},e),{},{isTransitioning:!0});case L:return i(i({},e),{},{isTransitioning:!1,isVisible:!0});case V:return i(i({},e),{},{isTransitioning:!1,isVisible:!1});default:throw new Error("Unhandled action type: ".concat(n))}},e.unpackAttrs=p,e.unsubscribe=k,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core.js.map
