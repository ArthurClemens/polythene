!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={})}(this,(function(e){"use strict";function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(n){i(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==t)return;var i,o,r=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(i=t.next()).done)&&(r.push(i.value),!n||r.length!==n);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw o}}return r}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var u="hidden",s="visible",d="exposing",c="hiding",l=function(e,n){return e[n]=1,e},f=["key","style","href","id","data-index","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],m=function(e){return"function"==typeof e?e():e},p=function(e){return{small:e.small,regular:e.regular,medium:e.medium,large:e.large,fab:e.fab}},h="undefined"!=typeof document,v=!h,w={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},y=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=e.equals,a=e.contains,u=t?n.querySelector(t):n;if(!u)return!1;var s=document.defaultView;if(s){if(void 0!==r)return r===s.getComputedStyle(u,i).getPropertyValue(o);if(void 0!==a)return-1!==s.getComputedStyle(u,i).getPropertyValue(o).indexOf(a)}return!1},g=function(e){var n=parseFloat(e)*(-1===e.indexOf("ms")?1e3:1);return isNaN(n)?0:n},b=!v&&"ontouchstart"in document.documentElement,S=b?["touchstart","click"]:["click"],O=b?["click","mouseup"]:["mouseup"],E=b?["touchstart","mousedown"]:["mousedown"],D=b?["touchmove","mousemove"]:["mousemove"],C=b?["touchend","mouseup"]:["mouseup"];if(h){var P=document.querySelector("html");P&&P.classList.add(b?"pe-touch":"pe-no-touch")}var T={},j=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h?window:{},i=!1;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];var u=function(){return e.apply(t,r)};i||(u(),i=!0,setTimeout((function(){return i=!1}),n))}},I=function(e,n,t){T[e]=T[e]||[],T[e].push(t?j(n,t):n)},x=function(e,n){if(T[e]){var t=T[e].indexOf(n);t>-1&&T[e].splice(t,1)}},k=function(e,n){T[e]&&T[e].forEach((function(e){return e(n)}))};h&&(window.addEventListener("resize",(function(e){return k("resize",e)})),window.addEventListener("scroll",(function(e){return k("scroll",e)})),window.addEventListener("keydown",(function(e){return k("keydown",e)})),O.forEach((function(e){return window.addEventListener(e,(function(n){return k(e,n)}))})));var M=function(e){var n=e.options,i=[],a=function(e){k(n.name,e)},u=function(e){var n=c(e);return i.indexOf(n)},s=function(e){var n=u(e);-1!==n&&(i.splice(n,1),a({id:e,name:"removeItem"}))},d=function(e,n){var t=u(e);-1!==t&&(i[t]=n)},c=function(e){for(var n=0;n<i.length;n++)if(i[n].instanceId===e)return i[n]},l=function(){i.length&&(i[0].show=!0),a({id:i.length?i[0].instanceId:null,name:"next"})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;n.queue?(i.shift(),l()):s(e)},p=function(e,n){var t=c(n);t&&(t.pause=e,t.unpause=!e,a({id:n,name:e?"pause":"unpause"}))},v=function(e,i,o){var r,u,s=m(e),d=new Promise((function(e){return r=e})),c=new Promise((function(e){return u=e}));return t(t({},n),{},{instanceId:i,spawn:o,props:e,show:!n.queue,showPromise:d,hidePromise:c,didShow:function(){return s.didShow&&s.didShow(i),a({id:i,name:"didShow"}),r(i)},didHide:function(){return s.didHide&&s.didHide(i),a({id:i,name:"didHide"}),f(i),u(i)}})},w=function(){i.length=0,a({id:null,name:"removeAll"})};return{clear:w,count:function(){return i.length},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id||n.defaultId,o=n.queue&&i.length?i[0]:c(t);return o&&(o.hide=!0),a({id:t,name:"hide"}),o?o.hidePromise:Promise.resolve(t)},pause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;return p(!0,e)},remove:f,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.id||n.defaultId,r=t.spawn||n.defaultId,u=v(e,o,r);if(a({id:o,name:"show"}),n.queue)i.push(u),1===i.length&&l();else{var s=c(o);s?d(o,u):i.push(u)}return u.showPromise},unpause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;return p(!1,e)},render:function(e){var a=e.h,u=e.useState,s=e.useEffect,d=o(e,["h","useState","useEffect"]),c=r(u(),2)[1];s((function(){return I(n.name,c),function(){x(n.name,c)}}),[]);var l=d.spawn||n.defaultId,f=i.filter((function(e){return e.show&&e.spawn===l}));return n.htmlShowClass&&h&&document.documentElement&&document.documentElement.classList[f.length?"add":"remove"](n.htmlShowClass),f.length?a(n.holderSelector,{className:"container"===d.position?"pe-multiple--container":"pe-multiple--screen"},f.map((function(e){return a(n.instance,t(t({},m(d)),{},{fromMultipleClear:w,spawnId:l,fromMultipleClassName:n.className,holderSelector:n.holderSelector,transitions:n.transitions,fromMultipleDidHide:e.didHide,fromMultipleDidShow:e.didShow,hide:e.hide,instanceId:e.instanceId,key:void 0!==e.key?e.key:e.keyId,pause:e.pause,show:e.show,unpause:e.unpause},m(e.props)))}))):a(n.placeholder)}}};M.displayName="Multi";var A="show",H="hide",L="show-done",q="hide-done",V=function(e){return N(e,"show")},F=function(e){return N(e,"hide")},N=function(e,n){var t=e.el;return t?new Promise((function(i){var o=t.style,r=h?window.getComputedStyle(t):{},a=e.hasDuration&&void 0!==e.duration?1e3*e.duration:g(r.transitionDuration),u=e.hasDelay&&void 0!==e.delay?1e3*e.delay:g(r.transitionDelay),s=e.timingFunction||r.transitionTimingFunction;e.transitionClass&&t.classList.add(e.transitionClass);var d=function(){o.transitionDuration="0ms",o.transitionDelay="0ms",e.before&&"function"==typeof e.before&&e.before()},c=e.before&&"show"===n||e.before&&"hide"===n?d:null,l=function(){e.after&&"function"==typeof e.after&&e.after()},f=function(){o.transitionDuration=a+"ms",o.transitionDelay=u+"ms",s&&(o.transitionTimingFunction=s),e.showClass&&(e.showClassElement||t).classList["show"===n?"add":"remove"](e.showClass),e.transition&&e.transition(),setTimeout((function(){l&&l(),e.transitionClass&&(t.classList.remove(e.transitionClass),t.offsetHeight),i()}),a+u)},m=function(){0===a?f():setTimeout(f,0)};c?(c(),t.offsetHeight,setTimeout((function(){m()}),0)):m()})):Promise.resolve()};e.Multi=M,e._Conditional=function(e){var n=e.h,i=e.useState,a=e.useEffect,l=o(e,["h","useState","useEffect"]),f=r(i(l.permanent||l.permanent||l.show?s:u),2),m=f[0],p=f[1];a((function(){var e=m;l.permanent?m===s&&l.show?e=d:m!==d||l.show||(e=c):m===u&&l.show?e=s:m!==s||l.show||(e=c),e!==m&&p(e)}),[l]);var h=n("span",{className:l.placeholderClassName});return l.didHide?m!==u?n(l.instance,t(t({},l),{},{didHide:function(e){return l.didHide(e),p(l.permanent?s:u)}},m===c?{show:!0,hide:!0}:void 0)):h:l.permanent||l.inactive||l.show?n(l.instance,l):h},e.classForSize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return p(e)[n]},e.deprecation=function(e,n){var t=n.option,i=n.newOption,o=n.newComponent,r=n.since,a=r?"Since version ".concat(r,"."):"";return t&&console.warn("".concat(e,": option '").concat(t,"' is deprecated and will be removed in later versions. Use '").concat(i,"' instead. ").concat(a)),o&&!i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' instead. ").concat(a)),o&&i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' with option '").concat(i,"' instead. ").concat(a))},e.emit=k,e.filterSupportedAttributes=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.add,i=n.remove,o=i?i.reduce(l,{}):{},r=t?f.concat(t):f,a=r.filter((function(e){return!o[e]})).reduce(l,{});return Object.keys(e).reduce((function(n,t){return a[t]&&(n[t]=e[t]),n}),{})},e.getAnimationEndEvent=function(){if(h){var e=document.createElement("fakeelement");for(var n in w){if(void 0!==e.style[n])return w[n]}}},e.getStyle=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=t?n.querySelector(t):n;if(r){if(r.currentStyle)return r.currentStyle;if(window.getComputedStyle){var a=document.defaultView;if(a){var u=a.getComputedStyle(r,i);if(u)return u.getPropertyValue(o)}}}},e.hide=F,e.iconDropdownDown='<svg xmlns="http://www.w3.org/2000/svg" id="dd-down-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',e.iconDropdownUp='<svg xmlns="http://www.w3.org/2000/svg" id="dd-up-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>',e.initialTransitionState={isVisible:!1,isTransitioning:!1},e.isClient=h,e.isRTL=function(e){var n=e.element,t=void 0===n?document:n,i=e.selector;return y({element:t,selector:i,prop:"direction",equals:"rtl"})},e.isServer=v,e.isTouch=b,e.pointerEndDownEvent=C,e.pointerEndEvent=O,e.pointerMoveEvent=D,e.pointerStartDownEvent=E,e.pointerStartEvent=S,e.show=V,e.styleDurationToMs=g,e.stylePropCompare=y,e.subscribe=I,e.throttle=j,e.transitionComponent=function(e){var n=e.dispatchTransitionState,i=e.isTransitioning,o=e.instanceId,r=e.isShow,a=e.props,u=e.domElements,s=e.beforeTransition,d=e.afterTransition,c=e.showClass,l=e.transitionClass;if(e.referrer,i)return Promise.resolve();n(r?A:H),s&&s();var f=r?a.showDuration:a.hideDuration,m=r?a.showDelay:a.hideDelay,p=r?a.showTimingFunction:a.hideTimingFunction,h=a.transitions,v=r?V:F,w=t(t(t({},a),u),{},{showClass:c,transitionClass:l,duration:f,delay:m,timingFunction:p}),y=t(t({},w),h?(r?h.show:h.hide)(w):void 0);return v(t(t({},y),{duration:void 0!==y.duration?y.duration:.24,hasDuration:void 0!==y.duration,delay:void 0!==y.delay?y.delay:0,hasDelay:void 0!==y.delay})).then((function(){var e=o;d&&d(),(r?a.fromMultipleDidShow:a.fromMultipleDidHide)?(r?a.fromMultipleDidShow:a.fromMultipleDidHide)(e):(r?a.didShow:a.didHide)&&(r?a.didShow:a.didHide)(e),n(r?L:q)}))},e.transitionStateReducer=function(e,n){switch(n){case A:return t(t({},e),{},{isTransitioning:!0,isVisible:!0});case H:return t(t({},e),{},{isTransitioning:!0});case L:return t(t({},e),{},{isTransitioning:!1,isVisible:!0});case q:return t(t({},e),{},{isTransitioning:!1,isVisible:!1});default:throw new Error("Unhandled action type: ".concat(n))}},e.unpackAttrs=m,e.unsubscribe=x,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core.js.map
