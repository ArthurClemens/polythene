!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("polythene-utilities")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).polythene={},t["polythene-core"],t["polythene-utilities"])}(this,(function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){l=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u={component:"pe-tabs",indicator:"pe-tabs__indicator",scrollButton:"pe-tabs__scroll-button",scrollButtonAtEnd:"pe-tabs__scroll-button-end",scrollButtonAtStart:"pe-tabs__scroll-button-start",tab:"pe-tab",tabContent:"pe-tabs__tab-content",tabRow:"pe-tabs__row",activeSelectable:"pe-tabs__active--selectable",isAtEnd:"pe-tabs--end",isAtStart:"pe-tabs--start",isAutofit:"pe-tabs--autofit",isMenu:"pe-tabs--menu",scrollable:"pe-tabs--scrollable",compactTabs:"pe-tabs--compact",tabHasIcon:"pe-tabs__tab--icon",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",label:"pe-button__label"},d=function(t){return t.content?t.content:t.tabs?t.tabs:t.children||[]},f=function(t,e){return t<e?1:t>e?-1:0},b='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>',p='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>';t._ScrollButton=function(t){var e=t.h,n=t.a,r=t.IconButton,i=a(t,["h","a","IconButton"]),l="start"===i.position?i.icon||{svg:{content:e.trust(i.isRTL?p:b)}}:i.icon||{svg:{content:e.trust(i.isRTL?b:p)}};return e(r,o({},{className:[u.scrollButton,i.className||i[n.class]].join(" "),icon:l,ripple:{center:!0},events:i.events}))},t._Tab=function(t){var e=t.h,n=t.a,i=t.Button,l=t.Icon,c=a(t,["h","a","Button","Icon"]),s=c.events||{};s[n.onclick]=s[n.onclick]||function(){};var d=o({},c,c.testId&&{"data-test-id":c.testId},{"data-index":c.index,content:e("div",{className:u.tabContent},[c.icon?e(l,c.icon):null,c.label?e("div",{className:u.label},e("span",c.label)):null]),className:[u.tab,c.icon&&c.label?u.tabHasIcon:null,c.className||c[n.class]].join(" "),selected:c.selected,wash:!1,ripple:!0,events:o({},s,r({},n.onclick,(function(t){c.onSelect(),s[n.onclick](t)})))});return e(i,d,c.children)},t._Tabs=function(t){var c=t.h,s=t.a,b=t.getRef,p=t.useRef,h=t.useState,v=t.useEffect,m=t.ScrollButton,y=t.Tab,g=a(t,["h","a","getRef","useRef","useState","useEffect","ScrollButton","Tab"]),w=d(g);if(0===w.length)throw new Error("No tabs specified");var S=i(h(),2),T=S[0],_=S[1],x=i(h(!1),2),I=x[0],A=x[1],B=function(t){var e=d(t),n=Array.isArray(e)?e.reduce((function(t,e,n){return void 0===t&&!e.disabled&&e.selected?n:t}),void 0):void 0;if(void 0!==n)return n;var r=void 0!==t.selectedTabIndex?t.selectedTabIndex:void 0!==t.selectedTab?t.selectedTab:void 0;return void 0!==r?r:0}(g)||0,R=p(B),j=i(h(!1),2),O=j[0],L=j[1],C=i(h(!1),2),E=C[0],N=C[1],k=i(h([]),2),M=k[0],P=k[1],q=i(h(),2),z=q[0],W=q[1],H=g.scrollable&&!e.isTouch,D=T&&T.querySelector(".".concat(u.tabRow)),F=T&&T.querySelector(".".concat(u.indicator)),U=!!T&&M.length===w.length;v((function(){if(D){var t=l(D.querySelectorAll("[data-index]")).map((function(t){var e=parseInt(t.getAttribute("data-index"),10);return{dom:t,options:w[e]}}));t&&P(t)}}),[D]);var X=function(t,e){t.stopPropagation(),t.preventDefault();var n=function(t,e){var n=e.length-1;return{backward:Math.max(t-1,0),forward:Math.min(t+1,n)}}(R.current,M)[e];n!==R.current?J({index:n,animate:!0}):G(n)},$=function(){var t=D.scrollLeft,e=M.length-1,n=0===D.scrollLeft&&0===R.current,r=t>=D.scrollWidth-T.getBoundingClientRect().width-1&&R.current===e;L(n),N(r)},G=function(t){var e=D,r=M.slice(0,t).reduce((function(t,e){return t+e.dom.getBoundingClientRect().width}),0),o=e.getBoundingClientRect().width,a=e.scrollWidth-o,i=I?-1*Math.min(r,a):Math.min(r,a),l=e.scrollLeft;if(l!==i){var c=Math.abs(l-i)/600;setTimeout((function(){n.scrollTo({element:e,to:i,duration:Math.max(.5,c),direction:"horizontal"}).then($)}),150)}},J=function(t){var e=t.index,n=t.animate;if(M&&M.length){R.current=e;var r=M[e].dom;r&&function(t){var e=t.selectedTabElement,n=t.animate;if(F){var r=T.getBoundingClientRect(),o=e.getBoundingClientRect(),a=H?o.height:0,i=I?o.right-r.right+D.scrollLeft+a:o.left-r.left+D.scrollLeft-a,l=1/(r.width-2*a)*o.width,c="translate(".concat(i,"px, 0) scaleX(").concat(l,")"),s=n?.25:0,u=F.style;u["transition-duration"]=s+"s",u.opacity=1,u.transform=c}}({selectedTabElement:r,animate:n}),H&&$(),G(e),g.onChange&&g.onChange({index:e,options:M[e].options,el:r})}};v((function(){if(U){A(e.isRTL({element:T}));var t=function(){!function(){if(g.largestWidth){var t=M.map((function(t){return t.dom.getBoundingClientRect().width})).sort(f)[0];M.forEach((function(e){return e.dom.style.width=t+"px"}))}}(),J({index:R.current,animate:!1})},n=function(e){var n=e.name;return"active"===n||"inactive"===n?t():null};return e.subscribe("resize",t),e.subscribe("webfontloader",n),t(),function(){e.unsubscribe("resize",t),e.unsubscribe("webfontloader",n)}}}),[U]);var K=!g.scrollable&&!g.centered&&!!g.autofit;void 0!==B&&z!==B&&J({index:B,animate:!0}),z!==B&&W(B);var Q=o({},b((function(t){return t&&!T&&setTimeout((function(){return _(t)}),0)})),e.filterSupportedAttributes(g),g.testId&&{"data-test-id":g.testId},{className:[u.component,g.scrollable?u.scrollable:null,O?u.isAtStart:null,E?u.isAtEnd:null,g.activeSelected?u.activeSelectable:null,K?u.isAutofit:null,g.compact?u.compactTabs:null,g.menu?u.isMenu:null,"dark"===g.tone?"pe-dark-tone":null,"light"===g.tone?"pe-light-tone":null,g.className||g[s.class]].join(" ")}),V=w.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=o({},t,{selected:e===R.current,animateOnTap:!1!==g.animateOnTap},g.all,{index:e,onSelect:function(){return J({index:e,animate:!g.noIndicatorSlide})}});return c(y,n)})),Y=null,Z=null;g.scrollable&&(Y=c(m,o({},{icon:g.scrollIconBackward,className:u.scrollButtonAtStart,position:"start",events:r({},s.onclick,(function(t){return X(t,"backward")})),isRTL:I})),Z=c(m,o({},{icon:g.scrollIconForward,className:u.scrollButtonAtEnd,position:"end",events:r({},s.onclick,(function(t){return X(t,"forward")})),isRTL:I})));var tt=g.hideIndicator?null:c("div",{className:u.indicator}),et=[Y,c("div",{className:[u.tabRow,g.centered?u.tabRowCentered:null,g.scrollable?u.tabRowIndent:null].join(" ")},[].concat(l(V),[tt])),Z];return c("div",Q,[g.before].concat(et,[g.after]))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-tabs.js.map
