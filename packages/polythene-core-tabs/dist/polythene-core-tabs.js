!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("polythene-utilities")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities"],e):e((t=t||self).polythene={},t["polythene-core"],t["polythene-utilities"])}(this,(function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c={component:"pe-tabs",indicator:"pe-tabs__indicator",scrollButton:"pe-tabs__scroll-button",scrollButtonAtEnd:"pe-tabs__scroll-button-end",scrollButtonAtStart:"pe-tabs__scroll-button-start",tab:"pe-tab",tabContent:"pe-tabs__tab-content",tabRow:"pe-tabs__row",activeSelectable:"pe-tabs__active--selectable",isAtEnd:"pe-tabs--end",isAtStart:"pe-tabs--start",isAutofit:"pe-tabs--autofit",isMenu:"pe-tabs--menu",scrollable:"pe-tabs--scrollable",compactTabs:"pe-tabs--compact",tabHasIcon:"pe-tabs__tab--icon",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",label:"pe-button__label"},s=function(t){return t.content?t.content:t.tabs?t.tabs:t.children||[]},u=function(t,e){return t<e?1:t>e?-1:0},d='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>',f='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>';t._ScrollButton=function(t){var e=t.h,n=t.a,r=t.IconButton,i=a(t,["h","a","IconButton"]),l="start"===i.position?i.icon||{svg:{content:e.trust(i.isRTL?f:d)}}:i.icon||{svg:{content:e.trust(i.isRTL?d:f)}};return e(r,o({},{className:[c.scrollButton,i.className||i[n.class]].join(" "),icon:l,ripple:{center:!0},events:i.events}))},t._Tab=function(t){var e=t.h,n=t.a,i=t.Button,l=t.Icon,s=a(t,["h","a","Button","Icon"]),u=s.events||{};u[n.onclick]=u[n.onclick]||function(){};var d=o({},s,s.testId&&{"data-test-id":s.testId},{"data-index":s.index,content:e("div",{className:c.tabContent},[s.icon?e(l,s.icon):null,s.label?e("div",{className:c.label},e("span",s.label)):null]),className:[c.tab,s.icon&&s.label?c.tabHasIcon:null,s.className||s[n.class]].join(" "),selected:s.selected,wash:!1,ripple:!0,events:o({},u,r({},n.onclick,(function(t){s.onSelect(),u[n.onclick](t)})))});return e(i,d,s.children)},t._Tabs=function(t){var d=t.h,f=t.a,b=t.getRef,p=t.useRef,v=t.useState,h=t.useEffect,m=t.ScrollButton,g=t.Tab,y=a(t,["h","a","getRef","useRef","useState","useEffect","ScrollButton","Tab"]),w=s(y);if(0===w.length)throw new Error("No tabs specified");var _=i(v(),2),x=_[0],T=_[1],S=i(v(!1),2),A=S[0],B=S[1],I=function(t){var e=s(t),n=Array.isArray(e)?e.reduce((function(t,e,n){return void 0===t&&!e.disabled&&e.selected?n:t}),void 0):void 0;if(void 0!==n)return n;var r=void 0!==t.selectedTabIndex?t.selectedTabIndex:void 0!==t.selectedTab?t.selectedTab:void 0;return void 0!==r?r:0}(y)||0,R=p(I),O=i(v(!1),2),j=O[0],L=O[1],E=i(v(!1),2),N=E[0],k=E[1],C=i(v([]),2),M=C[0],P=C[1],q=i(v(),2),z=q[0],W=q[1],H=y.scrollable&&!e.isTouch,D=x&&x.querySelector(".".concat(c.tabRow)),F=x&&x.querySelector(".".concat(c.indicator)),X=!!x&&M.length===w.length;h((function(){if(D){var t=l(D.querySelectorAll("[data-index]")).map((function(t){var e=parseInt(t.getAttribute("data-index"),10);return{dom:t,options:w[e]}}));t&&P(t)}}),[D]);var G=function(t,e){t.stopPropagation(),t.preventDefault();var n=function(t,e){var n=e.length-1;return{backward:Math.max(t-1,0),forward:Math.min(t+1,n)}}(R.current,M)[e];n!==R.current?Q({index:n,animate:!0}):K(n)},J=function(){var t=D.scrollLeft,e=M.length-1,n=0===D.scrollLeft&&0===R.current,r=t>=D.scrollWidth-x.getBoundingClientRect().width-1&&R.current===e;L(n),k(r)},K=function(t){var e=D,r=M.slice(0,t).reduce((function(t,e){return t+e.dom.getBoundingClientRect().width}),0),o=e.getBoundingClientRect().width,a=e.scrollWidth-o,i=A?-1*Math.min(r,a):Math.min(r,a),l=e.scrollLeft;if(l!==i){var c=Math.abs(l-i)/600;setTimeout((function(){n.scrollTo({element:e,to:i,duration:Math.max(.5,c),direction:"horizontal"}).then(J)}),150)}},Q=function(t){var e=t.index,n=t.animate;if(M&&M.length){R.current=e;var r=M[e].dom;r&&function(t){var e=t.selectedTabElement,n=t.animate;if(F){var r=x.getBoundingClientRect(),o=e.getBoundingClientRect(),a=H?o.height:0,i=A?o.right-r.right+D.scrollLeft+a:o.left-r.left+D.scrollLeft-a,l=1/(r.width-2*a)*o.width,c="translate(".concat(i,"px, 0) scaleX(").concat(l,")"),s=n?.25:0,u=F.style;u["transition-duration"]=s+"s",u.opacity=1,u.transform=c}}({selectedTabElement:r,animate:n}),H&&J(),K(e),y.onChange&&y.onChange({index:e,options:M[e].options,el:r})}};h((function(){if(X){B(e.isRTL({element:x}));var t=function(){!function(){if(y.largestWidth){var t=M.map((function(t){return t.dom.getBoundingClientRect().width})).sort(u)[0];M.forEach((function(e){return e.dom.style.width=t+"px"}))}}(),Q({index:R.current,animate:!1})},n=function(e){var n=e.name;return"active"===n||"inactive"===n?t():null};return e.subscribe("resize",t),e.subscribe("webfontloader",n),t(),function(){e.unsubscribe("resize",t),e.unsubscribe("webfontloader",n)}}}),[X]);var U=!y.scrollable&&!y.centered&&!!y.autofit;void 0!==I&&z!==I&&Q({index:I,animate:!0}),z!==I&&W(I);var V=o({},b((function(t){return t&&!x&&setTimeout((function(){return T(t)}),0)})),e.filterSupportedAttributes(y),y.testId&&{"data-test-id":y.testId},{className:[c.component,y.scrollable?c.scrollable:null,j?c.isAtStart:null,N?c.isAtEnd:null,y.activeSelected?c.activeSelectable:null,U?c.isAutofit:null,y.compact?c.compactTabs:null,y.menu?c.isMenu:null,"dark"===y.tone?"pe-dark-tone":null,"light"===y.tone?"pe-light-tone":null,y.className||y[f.class]].join(" ")}),Y=w.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=o({},t,{selected:e===R.current,animateOnTap:!1!==y.animateOnTap},y.all,{index:e,onSelect:function(){return Q({index:e,animate:!y.noIndicatorSlide})}});return d(g,n)})),Z=null,$=null;y.scrollable&&(Z=d(m,o({},{icon:y.scrollIconBackward,className:c.scrollButtonAtStart,position:"start",events:r({},f.onclick,(function(t){return G(t,"backward")})),isRTL:A})),$=d(m,o({},{icon:y.scrollIconForward,className:c.scrollButtonAtEnd,position:"end",events:r({},f.onclick,(function(t){return G(t,"forward")})),isRTL:A})));var tt=y.hideIndicator?null:d("div",{className:c.indicator}),et=[Z,d("div",{className:[c.tabRow,y.centered?c.tabRowCentered:null,y.scrollable?c.tabRowIndent:null].join(" ")},[].concat(l(Y),[tt])),$];return d("div",V,[y.before].concat(et,[y.after]))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-tabs.js.map
