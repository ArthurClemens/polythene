{"version":3,"file":"polythene-core-radio-group.js","sources":["../../polythene-css-classes/radio-group.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component: \"pe-radio-group\",\n};\n","import { filterSupportedAttributes } from \"polythene-core\";\nimport classes from \"polythene-css-classes/radio-group\";\n\nexport const _RadioGroup = ({ h, a, useState, useEffect, RadioButton, ...props }) => {\n  const [checkedIndex, setCheckedIndex] = useState();\n  const buttons = props.content || props.buttons || props.children;\n  \n  useEffect(\n    () => {\n      const index = buttons.reduce((acc, buttonOpts, index) => {\n        if (buttonOpts.value === undefined) {\n          console.error(\"Option 'value' not set for radio button\"); // eslint-disable-line no-console\n        }\n        return acc !== null\n          ? acc\n          : (\n            buttonOpts.defaultChecked !== undefined\n            || (props.defaultCheckedValue !== undefined && buttonOpts.value === props.defaultCheckedValue)\n            || (props.defaultSelectedValue !== undefined && buttonOpts.value === props.defaultSelectedValue) // deprecated\n          )\n            ? index\n            : acc;\n      }, null);\n      setCheckedIndex(index);\n    },\n    []\n  );\n  \n  const componentProps = Object.assign({},\n    filterSupportedAttributes(props),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.component,\n        props.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        props.tone === \"light\" ? \"pe-light-tone\" : null,\n        props.className || props[a.class],\n      ].join(\" \"),\n    }\n  );\n\n  const groupCheckedValue= props.checkedValue;\n  const contents = buttons.length\n    ? buttons.map((buttonOpts, index) => {\n      if (!buttonOpts) {\n        return null;\n      }\n      const isChecked = buttonOpts.checked !== undefined\n        ? buttonOpts.checked\n        : groupCheckedValue !== undefined\n          ? buttonOpts.value === groupCheckedValue\n          : checkedIndex === index;\n      \n      return h(RadioButton, Object.assign(\n        {},\n        {\n          /* group attributes that may be overwritten by individual buttons */\n          name: props.name,\n        },\n        props.all,\n        /* individual button options */\n        buttonOpts,\n        {\n          /* this component's options */\n          onChange: ({ value }) => (\n            setCheckedIndex(index),\n            props.onChange && props.onChange({ value })\n          ),\n          checked: isChecked,\n          key: buttonOpts.value // required for proper selection\n        }\n      ));\n    })\n    : null;\n  const content = [\n    props.before,\n    contents,\n    props.after,\n  ];\n  return h(props.element || \"div\", componentProps, content);\n};\n"],"names":["component","h","a","useState","useEffect","RadioButton","props","checkedIndex","setCheckedIndex","buttons","content","children","index","reduce","acc","buttonOpts","undefined","value","console","error","defaultChecked","defaultCheckedValue","defaultSelectedValue","componentProps","_extends","filterSupportedAttributes","testId","className","classes","tone","join","groupCheckedValue","checkedValue","contents","length","map","isChecked","checked","name","all","onChange","key","before","after","element"],"mappings":"m0DACe,CACbA,UAAW,gCCCc,gBAAGC,IAAAA,EAAGC,IAAAA,EAAGC,IAAAA,SAAUC,IAAAA,UAAWC,IAAAA,YAAgBC,0DAC/BH,OAAjCI,OAAcC,OACfC,EAAUH,EAAMI,SAAWJ,EAAMG,SAAWH,EAAMK,SAExDP,GACE,eACQQ,EAAQH,EAAQI,QAAO,SAACC,EAAKC,EAAYH,eACpBI,IAArBD,EAAWE,OACbC,QAAQC,MAAM,2CAED,OAARL,EACHA,OAE8BE,IAA9BD,EAAWK,qBACuBJ,IAA9BV,EAAMe,qBAAqCN,EAAWE,QAAUX,EAAMe,0BACvCL,IAA/BV,EAAMgB,sBAAsCP,EAAWE,QAAUX,EAAMgB,qBAEzEV,EACAE,IACL,MACHN,EAAgBI,KAElB,QAGIW,EAAiBC,EAAc,GACnCC,4BAA0BnB,GAC1BA,EAAMoB,QAAU,gBAAkBpB,EAAMoB,QACxC,CACEC,UAAW,CACTC,EAAQ5B,UACO,SAAfM,EAAMuB,KAAkB,eAAiB,KAC1B,UAAfvB,EAAMuB,KAAmB,gBAAkB,KAC3CvB,EAAMqB,WAAarB,EAAMJ,UACzB4B,KAAK,OAILC,EAAmBzB,EAAM0B,aACzBC,EAAWxB,EAAQyB,OACrBzB,EAAQ0B,KAAI,SAACpB,EAAYH,OACpBG,SACI,SAEHqB,OAAmCpB,IAAvBD,EAAWsB,QACzBtB,EAAWsB,aACWrB,IAAtBe,EACEhB,EAAWE,QAAUc,EACrBxB,IAAiBK,SAEhBX,EAAEI,EAAamB,EACpB,GACA,CAEEc,KAAMhC,EAAMgC,MAEdhC,EAAMiC,IAENxB,EACA,CAEEyB,SAAU,gBAAGvB,IAAAA,aACXT,EAAgBI,GAChBN,EAAMkC,UAAYlC,EAAMkC,SAAS,CAAEvB,MAAAA,KAErCoB,QAASD,EACTK,IAAK1B,EAAWE,YAIpB,KACEP,EAAU,CACdJ,EAAMoC,OACNT,EACA3B,EAAMqC,cAED1C,EAAEK,EAAMsC,SAAW,MAAOrB,EAAgBb"}