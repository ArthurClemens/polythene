{"version":3,"file":"polythene-core-radio-group.js","sources":["../../polythene-css-classes/radio-group.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component: \"pe-radio-group\",\n};\n","import { filterSupportedAttributes } from \"polythene-core\";\nimport classes from \"polythene-css-classes/radio-group\";\n\nexport const _RadioGroup = ({\n  h,\n  a,\n  useState,\n  useEffect,\n  RadioButton,\n  ...props\n}) => {\n  const [checkedIndex, setCheckedIndex] = useState();\n  const buttons = props.content || props.buttons || props.children;\n\n  useEffect(() => {\n    const index = buttons.reduce((acc, buttonOpts, index) => {\n      if (buttonOpts.value === undefined) {\n        console.error(\"Option 'value' not set for radio button\"); // eslint-disable-line no-console\n      }\n      return acc !== null\n        ? acc\n        : buttonOpts.defaultChecked !== undefined ||\n          (props.defaultCheckedValue !== undefined &&\n            buttonOpts.value === props.defaultCheckedValue) ||\n          (props.defaultSelectedValue !== undefined &&\n            buttonOpts.value === props.defaultSelectedValue) // deprecated\n        ? index\n        : acc;\n    }, null);\n    setCheckedIndex(index);\n  }, []);\n\n  const componentProps = Object.assign(\n    {},\n    filterSupportedAttributes(props),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.component,\n        props.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        props.tone === \"light\" ? \"pe-light-tone\" : null,\n        props.className || props[a.class],\n      ].join(\" \"),\n      role: \"radiogroup\",\n    }\n  );\n\n  const groupCheckedValue = props.checkedValue;\n  const contents = buttons.length\n    ? buttons.map((buttonOpts, index) => {\n        if (!buttonOpts) {\n          return null;\n        }\n        const isChecked =\n          buttonOpts.checked !== undefined\n            ? buttonOpts.checked\n            : groupCheckedValue !== undefined\n            ? buttonOpts.value === groupCheckedValue\n            : checkedIndex === index;\n\n        return h(\n          RadioButton,\n          Object.assign(\n            {},\n            {\n              /* group attributes that may be overwritten by individual buttons */\n              name: props.name,\n            },\n            props.all,\n            /* individual button options */\n            buttonOpts,\n            {\n              /* this component's options */\n              onChange: ({ value }) => (\n                setCheckedIndex(index),\n                props.onChange && props.onChange({ value })\n              ),\n              checked: isChecked,\n              key: buttonOpts.value, // required for proper selection\n            }\n          )\n        );\n      })\n    : null;\n  const content = [props.before, contents, props.after];\n  return h(props.element || \"div\", componentProps, content);\n};\n"],"names":["component","h","a","useState","useEffect","RadioButton","props","checkedIndex","setCheckedIndex","buttons","content","children","index","reduce","acc","buttonOpts","undefined","value","console","error","defaultChecked","defaultCheckedValue","defaultSelectedValue","componentProps","_extends","filterSupportedAttributes","testId","className","classes","tone","join","role","groupCheckedValue","checkedValue","contents","length","map","isChecked","checked","name","all","onChange","key","before","after","element"],"mappings":"m0DACe,CACbA,UAAW,gCCCc,gBACzBC,IAAAA,EACAC,IAAAA,EACAC,IAAAA,SACAC,IAAAA,UACAC,IAAAA,YACGC,0DAEqCH,OAAjCI,OAAcC,OACfC,EAAUH,EAAMI,SAAWJ,EAAMG,SAAWH,EAAMK,SAExDP,GAAU,eACFQ,EAAQH,EAAQI,QAAO,SAACC,EAAKC,EAAYH,eACpBI,IAArBD,EAAWE,OACbC,QAAQC,MAAM,2CAED,OAARL,EACHA,OAC8BE,IAA9BD,EAAWK,qBACoBJ,IAA9BV,EAAMe,qBACLN,EAAWE,QAAUX,EAAMe,0BACGL,IAA/BV,EAAMgB,sBACLP,EAAWE,QAAUX,EAAMgB,qBAC7BV,EACAE,IACH,MACHN,EAAgBI,KACf,QAEGW,EAAiBC,EACrB,GACAC,4BAA0BnB,GAC1BA,EAAMoB,QAAU,gBAAkBpB,EAAMoB,QACxC,CACEC,UAAW,CACTC,EAAQ5B,UACO,SAAfM,EAAMuB,KAAkB,eAAiB,KAC1B,UAAfvB,EAAMuB,KAAmB,gBAAkB,KAC3CvB,EAAMqB,WAAarB,EAAMJ,UACzB4B,KAAK,KACPC,KAAM,eAIJC,EAAoB1B,EAAM2B,aAC1BC,EAAWzB,EAAQ0B,OACrB1B,EAAQ2B,KAAI,SAACrB,EAAYH,OAClBG,SACI,SAEHsB,OACmBrB,IAAvBD,EAAWuB,QACPvB,EAAWuB,aACWtB,IAAtBgB,EACAjB,EAAWE,QAAUe,EACrBzB,IAAiBK,SAEhBX,EACLI,EACAmB,EACE,GACA,CAEEe,KAAMjC,EAAMiC,MAEdjC,EAAMkC,IAENzB,EACA,CAEE0B,SAAU,gBAAGxB,IAAAA,aACXT,EAAgBI,GAChBN,EAAMmC,UAAYnC,EAAMmC,SAAS,CAAExB,MAAAA,KAErCqB,QAASD,EACTK,IAAK3B,EAAWE,YAKxB,KACEP,EAAU,CAACJ,EAAMqC,OAAQT,EAAU5B,EAAMsC,cACxC3C,EAAEK,EAAMuC,SAAW,MAAOtB,EAAgBb"}