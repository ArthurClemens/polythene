{"version":3,"file":"polythene-css-dialog.js","sources":["../../polythene-css-classes/dialog.js","../src/color.js","../src/vars.js","../src/layout.js","../src/index.js"],"sourcesContent":["import menuClasses from \"./menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  placeholder:       \"pe-dialog__placeholder\",\n  holder:            \"pe-dialog__holder\",\n  content:           \"pe-dialog__content\",\n  backdrop:          \"pe-dialog__backdrop\",\n  touch:             \"pe-dialog__touch\",\n\n  // states\n  fullScreen:        \"pe-dialog--full-screen\",\n  modal:             \"pe-dialog--modal\",\n  open:              \"pe-dialog--open\",    // class set to html element\n  visible:           \"pe-dialog--visible\", // class set to dialog element\n  showBackdrop:      \"pe-dialog--backdrop\",\n  transition:        \"pe-dialog--transition\",\n\n  // lookup\n  menuContent:       menuClasses.content,\n};\n","// @ts-check\n\nimport { sel, createColor } from \"polythene-core-css\";\n\nconst generalFns = ({\n  general_styles: selector => [], // eslint-disable-line no-unused-vars\n});\n\nconst tintFns = tint => ({\n  [\"color_\" + tint + \"_background\"]: (selector, vars) => [\n    sel(selector, {\n      \" .pe-dialog__content\": {\n        backgroundColor: vars[\"color_\" + tint + \"_background\"],\n      },\n    })\n  ],\n  [\"color_\" + tint + \"_text\"]: (selector, vars) => [\n    sel(selector, {\n      \" .pe-dialog__content\": {\n        color: vars[\"color_\" + tint + \"_text\"],\n      },\n    })\n  ],\n  [\"color_\" + tint + \"_backdrop_background\"]: (selector, vars) => [\n    sel(selector, {\n      \" .pe-dialog__backdrop\": {\n        backgroundColor: vars[\"color_\" + tint + \"_backdrop_background\"]\n      }\n    })\n  ]\n});\n\nconst lightTintFns = Object.assign({}, generalFns, tintFns(\"light\"));\nconst darkTintFns = Object.assign({}, generalFns, tintFns(\"dark\"));\n\nexport default createColor({\n  varFns: { lightTintFns, darkTintFns }\n});\n","// @ts-check\n\n/**\n * @typedef {import(\"../index\").DialogVars} DialogVars\n */\n\nimport { rgba } from \"polythene-core-css\";\nimport { vars } from \"polythene-theme\";\nimport { sharedVars as shadowVars } from \"polythene-css-shadow\";\n\nexport const behaviorVars = {\n  full_screen:                       false,\n  modal:                             false,\n};\n\nconst themeVars = Object.assign(\n  {},\n  {\n    backdrop:                        false,\n    z_index:                         vars.z_dialog,\n  },\n  behaviorVars,\n  shadowVars\n);\n\n/**\n * @type {DialogVars} dialogVars\n */\nconst dialogVars = {\n  /**\n   * Generate general styles, not defined by variables\n   */\n  general_styles:                  true,\n\n  animation_delay:                 \"0s\",\n  animation_duration:              \".220s\",\n  animation_hide_css:              \"opacity: 0;\",\n  animation_show_css:              \"opacity: 1;\",\n  animation_timing_function:       \"ease-in-out\",\n  border_radius:                   vars.unit_block_border_radius,\n  position:                        \"fixed\",\n  \n  // color vars\n\n  color_light_backdrop_background: \"rgba(0, 0, 0, .4)\",\n  color_dark_backdrop_background:  \"rgba(0, 0, 0, .5)\",\n\n  color_light_background:          rgba(vars.color_light_background),\n  color_dark_background:           rgba(vars.color_dark_background),\n\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_regular),\n\n  ...themeVars\n};\n\nexport default dialogVars;\n","// @ts-check\n\nimport { mixin, flex, sel, createLayout, createMarker } from \"polythene-core-css\";\nimport { fullScreen as fullScreenPane } from \"polythene-css-dialog-pane\";\nimport { sharedVarFns as shadowVarFns } from \"polythene-css-shadow\";\nimport { behaviorVars } from \"./vars\";\n\nconst minWidth = \"320px\";\n\n/**\n * @param {string} selector \n * @param {object} vars \n */\nconst backdrop = (selector, vars) => // eslint-disable-line no-unused-vars\n  sel(selector, {\n    \".pe-dialog--visible .pe-dialog__backdrop\": {\n      display: \"block\",\n      opacity: 1,\n    }\n  });\n\nconst fullScreen = (selector, vars) =>\n  sel(selector, [\n    createMarker(vars, behaviorVars),\n    {\n      padding: 0,\n\n      \" .pe-dialog__content\": {\n        width: \"100%\", // for IE 11\n      },\n    },\n    fullScreenPane(selector, vars)\n  ]);\n\nconst modal = (selector, vars) =>\n  sel(selector, [\n    createMarker(vars, behaviorVars)\n  ]);\n\nconst varFns = {\n  /**\n   * @param {string} selector\n   * @param {object} vars \n   */\n  general_styles: (selector, vars) => [\n    sel(selector, [\n      flex.layoutCenterCenter,\n      {\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: vars.z_index,\n        height: \"100%\", // 100vh would make the dialog go beneath Mobile Safari toolbar        \n        transitionProperty: \"opacity,background-color,transform\",\n\n        \".pe-dialog--full-screen\": fullScreen(selector, vars),\n        \".pe-dialog--modal\": modal(selector, vars),\n\n        \" .pe-dialog__content\": {\n          position: \"relative\",\n          transitionProperty: \"all\",\n        },\n\n        \" .pe-dialog__backdrop\": [\n          mixin.defaultTransition(\"all\"), // animation duration is set in component options\n          {\n            position: \"absolute\",\n            opacity: 0,\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            pointerEvents: \"none\",\n          }\n        ],\n\n        \".pe-dialog--backdrop\": backdrop(selector, vars),\n      }\n    ]),\n    {\n      \".pe-dialog__holder\": {\n        height: \"100%\",\n        minWidth,\n      },\n    }\n  ],\n  animation_hide_css: (selector, vars) => [\n    sel(selector, [\n      vars.animation_hide_css\n    ]),\n  ],\n  position: (selector, vars) => [\n    sel(selector, {\n      position: vars.position,\n    }),\n  ],\n  animation_delay: (selector, vars) => [\n    sel(selector, {\n      \"&, .pe-dialog__content\": {\n        transitionDelay: vars.animation_delay,\n      }\n    }),\n  ],\n  animation_duration: (selector, vars) => [\n    sel(selector, {\n      \"&, .pe-dialog__content\": {\n        transitionDuration: vars.animation_duration,\n      }\n    }),\n  ],\n  animation_timing_function: (selector, vars) => [\n    sel(selector, {\n      \"&, .pe-dialog__content\": {\n        transitionTimingFunction: vars.animation_timing_function,\n      }\n    }),\n  ],\n  animation_show_css: (selector, vars) => [\n    sel(selector, {\n      \".pe-dialog--visible\": vars.animation_show_css,\n    }),\n  ],\n  border_radius: (selector, vars) => [\n    !vars.full_screen && sel(selector, {\n      \" .pe-dialog__content\": {\n        borderTopLeftRadius: vars.border_radius + \"px\",\n        borderTopRightRadius: vars.border_radius + \"px\",\n        borderBottomLeftRadius: vars.border_radius + \"px\",\n        borderBottomRightRadius: vars.border_radius + \"px\",\n      },\n    }),\n  ],\n  // Theme vars\n  backdrop: (selector, vars) =>\n    vars.backdrop && backdrop(selector, vars),\n  full_screen: (selector, vars) =>\n    vars.full_screen && fullScreen(selector, vars),\n  modal: (selector, vars) =>\n    vars.modal && modal(selector, vars),\n  // shadow_depth:\n  ...shadowVarFns\n};\n\nexport default createLayout({ varFns });\n","// @ts-check\n\nimport classes from \"polythene-css-classes/dialog\";\nimport color from \"./color\";\nimport layout from \"./layout\";\nimport vars from \"./vars\";\nimport { styler } from \"polythene-core-css\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nconst addStyle = styler.createAddStyle(selector, fns, vars);\n\nconst getStyle = styler.createGetStyle(selector, fns, vars);\n\nconst addGeneralStyleToHead = () =>\n  styler.addStyle({\n    selectors: [selector],\n    fns,\n    vars\n  });\n\nexport {\n  addGeneralStyleToHead,\n  addStyle,\n  getStyle,\n  color,\n  layout,\n  vars,\n};\n"],"names":["generalFns","general_styles","selector","tintFns","tint","vars","sel","backgroundColor","color","lightTintFns","_extends","darkTintFns","createColor","varFns","behaviorVars","full_screen","modal","themeVars","backdrop","z_index","z_dialog","shadowVars","dialogVars","animation_delay","animation_duration","animation_hide_css","animation_show_css","animation_timing_function","border_radius","unit_block_border_radius","position","color_light_backdrop_background","color_dark_backdrop_background","color_light_background","rgba","color_dark_background","color_light_text","color_light_foreground","blend_light_text_regular","color_dark_text","color_dark_foreground","blend_dark_text_regular","display","opacity","fullScreen","createMarker","padding","width","fullScreenPane","flex","layoutCenterCenter","top","left","right","bottom","zIndex","height","transitionProperty","mixin","defaultTransition","pointerEvents","minWidth","transitionDelay","transitionDuration","transitionTimingFunction","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","shadowVarFns","createLayout","fns","layout","classes","addStyle","styler","createAddStyle","getStyle","createGetStyle","selectors"],"mappings":"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"}