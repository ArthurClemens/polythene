!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).polythene={},e["polythene-core"])}(this,(function(e,t){"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,i,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u={component:"pe-slider",control:"pe-slider__control",label:"pe-slider__label",pin:"pe-slider__pin",thumb:"pe-slider__thumb",tick:"pe-slider__tick",ticks:"pe-slider__ticks",track:"pe-slider__track",trackBar:"pe-slider__track-bar",trackBarValue:"pe-slider__track-bar-value",trackPart:"pe-slider__track-part",trackPartRest:"pe-slider__track-rest",trackPartValue:"pe-slider__track-value",hasFocus:"pe-slider--focus",hasPin:"pe-slider--pin",hasTicks:"pe-slider--ticks",hasTrack:"pe-slider--track",isActive:"pe-slider--active",isAtMin:"pe-slider--min",isDisabled:"pe-slider--disabled",tickValue:"pe-slider__tick--value"},o=function(e,r){return t.isTouch&&e.touches?r?e.touches[0].pageY:e.touches[0].pageX:r?e.pageY:e.pageX};e._Slider=function(e){var c,l=e.h,s=e.a,d=e.useState,f=e.useEffect,p=e.useRef,v=e.getRef,y=i(e,["h","a","useState","useEffect","useRef","getRef"]),k=void 0!==y.min?y.min:0,h=void 0!==y.max?y.max:100,b=h-k,m=void 0!==y.stepSize?y.stepSize:1,g=1/m,w=void 0!==y.ticks&&!1!==y.ticks,_=void 0===y.interactiveTrack||y.interactiveTrack,E=Math.min(100,parseInt(b/m,10)),S=void 0!==y.defaultValue?y.defaultValue:void 0!==y.value?y.value:0,x=p(),N=p(),P=p(),A=p(),O=a(d(),2),j=O[0],D=O[1],R=a(d(k),2),T=R[0],C=R[1],B=a(d(!1),2),V=B[0],F=B[1],M=a(d(),2),I=M[0],L=M[1],q=a(d(),2),U=q[0],W=q[1],z=a(d(!1),2),K=z[0],X=z[1],Y=p(),H=p(),$=p(),G=p(),J=p(),Q=function(){if(P.current&&t.isClient){J.current=parseFloat(t.getStyle({element:P.current,prop:"width"})),$.current=N.current.getBoundingClientRect().width-J.current;var e=window.getComputedStyle(N.current);G.current=parseFloat(e.marginLeft)}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;H.current=N.current.getBoundingClientRect().left-(G.current-J.current/2)+e},ee=function(e){var t=o(e)-H.current,r=k+(t-G.current)/$.current*b;ne(r)},te=function(e){if(!Y.current){e.preventDefault(),Y.current=!0,X(!0),ce();var r=function(e){Y.current&&ee(e)},n=function e(){Y.current&&(ce(),t.isClient&&(t.pointerMoveEvent.forEach((function(e){return window.removeEventListener(e,r)})),t.pointerEndDownEvent.forEach((function(t){return window.removeEventListener(t,e)}))),Y.current=!1,X(!1))};t.isClient&&(t.pointerMoveEvent.forEach((function(e){return window.addEventListener(e,r)})),t.pointerEndDownEvent.forEach((function(e){return window.addEventListener(e,n)}))),Q()}},re=function(e){var t=e.value,r=e.shouldNotify,n=void 0!==r&&r;t<k&&(t=k),t>h&&(t=h);var i=m?Math.round(t*g)/g:t;C((i-k)/b),W(i),L(i),n&&y.onChange&&y.onChange({value:i})},ne=function(e){re({value:e,shouldNotify:!0})},ie=function(e){return ne(I+(e?10:1)*(m||1))},ae=function(e){return ne(I-(e?10:1)*(m||1))},ce=function(){x.current&&x.current.blur(),x.current=void 0,F(!1)};f((function(){Y.current=!1,H.current=0,$.current=0,G.current=0,J.current=0}),[]),f((function(){j&&(N.current=j.querySelector(".".concat(u.track)),P.current=j.querySelector(".".concat(u.control)),A.current=j.querySelector(".".concat(u.pin)),Q(),re({value:S}))}),[j]),f((function(){y.pin&&function(){if(P.current&&A.current){var e=T*$.current;A.current.style.left=e+"px"}}()}),[I]),f((function(){U!==y.value&&re({value:y.value})}),[y.value]);var ue=n({},t.filterSupportedAttributes(y),v((function(e){return e&&!j&&D(e)})),y.testId&&{"data-test-id":y.testId},{className:[u.component,y.disabled?u.isDisabled:null,y.pin?u.hasPin:null,_?u.hasTrack:null,K?u.isActive:null,V?u.hasFocus:null,0===T?u.isAtMin:null,w?u.hasTicks:null,"dark"===y.tone?"pe-dark-tone":null,"light"===y.tone?"pe-light-tone":null,y.className||y[s.class]].join(" ")}),oe=function(e){e.preventDefault(),Y.current||(Q(),Z(0),ee(e),te(e))},le=function(e){e.preventDefault(),Q(),function(e){var t=P.current.getBoundingClientRect().left,r=o(e)-t-J.current/2;Z(r)}(e),te(e)},se=T+" 1 0%",de=1-T,fe=de+" 1 0%",pe=[y.before,l("div",n({},{className:u.track,role:_?"button":void 0},_&&!y.disabled&&t.pointerStartDownEvent.reduce((function(e,t){return e[s["on".concat(t)]]=oe,e}),{})),[l("div",{className:u.trackPart+" "+u.trackPartValue,style:{flex:se,msFlex:se,WebkitFlex:se}},l("div",{className:u.trackBar},l("div",{className:u.trackBarValue}))),l("div",n({},{className:u.control},y.disabled?{disabled:!0}:(c={role:"button"},r(c,s.tabindex,y[s.tabindex]||0),r(c,s.onfocus,(function(){return e=P.current,ce(),x.current=e,void F(!0);var e})),r(c,s.onblur,(function(){return ce()})),r(c,s.onkeydown,(function(e){"Tab"!==e.key&&e.preventDefault(),"Escape"===e.key||"Esc"===e.key?P.current.blur(e):"ArrowLeft"===e.key||"ArrowDown"===e.key||"Left"===e.key||"Down"===e.key?ae(!!e.shiftKey):"ArrowRight"===e.key||"ArrowUp"===e.key||"Right"===e.key||"Up"===e.key?ie(!!e.shiftKey):"Home"===e.key?ne(k):"End"===e.key?ne(h):"PageDown"===e.key?ae(!0):"PageUp"===e.key&&ie(!0),Q()})),c),!y.disabled&&t.pointerStartDownEvent.reduce((function(e,t){return e[s["on".concat(t)]]=le,e}),{}),y.events?y.events:null,w?{step:E}:null),y.icon?l("div",{className:u.thumb},y.icon):null),l("div",{className:u.trackPart+" "+u.trackPartRest,style:{flex:fe,msFlex:fe,WebkitFlex:fe,maxWidth:100*de+"%"}},l("div",{className:u.trackBar},l("div",{className:u.trackBarValue}))),w&&!y.disabled?l("div",{className:u.ticks},function(e,t,r,n){for(var i=[],a=n/r,c=0;c<t+1;)i.push(e("div",{className:c<=a?[u.tick,u.tickValue].join(" "):u.tick,key:"tick-".concat(c)})),c++;return i}(l,E,m,I)):null,w&&y.pin&&!y.disabled?l("div",{className:u.pin,value:I}):null]),y.after];return l(y.element||"div",ue,pe)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-slider.js.map
