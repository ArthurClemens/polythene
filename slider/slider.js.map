{"version":3,"sources":["slider.es6"],"names":["require","_polythene","_mithril","_config","_isomorphic","CSS_CLASSES","block","thumb","label","track","trackPart","trackPartValue","trackPartRest","trackBar","trackBarValue","control","ticks","tick","pin","isDisabled","isActive","hasTrack","hasPin","hasFocus","isAtMin","hasTicks","focusElement","eventMoveType","eventEndType","_isomorphic2","default","isClient","window","PointerEvent","DocumentTouch","document","deFocus","ctrl","blur","undefined","focus","el","positionFromEvent","e","isVertical","_polythene2","isTouch","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","min","max","stepSize","steps","Math","round","items","s","push","_mithril2","class","readRangeData","controlWidth","_config2","thumb_size","trackEl","getBoundingClientRect","width","styles","getComputedStyle","rangeOffset","parseFloat","marginLeft","calculateClickOffset","controlOffset","arguments","length","clickOffset","initControlEvent","controlPos","eventPos","initTrackEvent","handlePosEvent","pos","redraw","startDrag","opts","isServer","isDragging","preventDefault","drag","endDrag","removeEventListener","addEventListener","startTrack","createSlider","interactiveTrack","stepCount","parseInt","step","onStartTrack","onInitDrag","flexValueCss","flexRestValue","flexRestCss","Object","assign","config","inited","setTimeout","disabled","onmousedown","ontouchstart","flex","-ms-flex","webkitFlex","tabindex","onfocus","onblur","onkeydown","which","decrease","shiftKey","increase","events","icon","max-width","createView","tag","props","join","id","content","before","after","component","controller","defaultValue","_fraction","_value","v","getValue","multiply","view"],"mappings":"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","file":"slider.js","sourcesContent":["import 'polythene/common/object.assign';\nimport p from 'polythene/polythene/polythene';\nimport m from 'mithril';\nimport 'polythene/slider/theme/theme';\nimport themeConfig from 'polythene/slider/theme/config';\nimport isomorphic from 'polythene/common/isomorphic';\n\nconst CSS_CLASSES = {\n    block: 'pe-slider',\n    thumb: 'pe-slider__thumb',\n    label: 'pe-slider__label',\n    track: 'pe-slider__track',\n    trackPart: 'pe-slider__track-part',\n    trackPartValue: 'pe-slider__track-value',\n    trackPartRest: 'pe-slider__track-rest',\n    trackBar: 'pe-slider__track-bar',\n    trackBarValue: 'pe-slider__track-bar-value',\n\n    control: 'pe-slider__control',\n    ticks: 'pe-slider__ticks',\n    tick: 'pe-slider__ticks-tick',\n    pin: 'pe-slider__pin',\n\n    isDisabled: 'pe-slider--disabled',\n    isActive: 'pe-slider--active',\n    hasTrack: 'pe-slider--track',\n    hasPin: 'pe-slider--pin',\n    hasFocus: 'pe-slider--focus',\n    isAtMin: 'pe-slider--min',\n    hasTicks: 'pe-slider--ticks'\n};\n\nlet focusElement;\n\n// const eventStartType = window.PointerEvent ? 'pointerdown' : (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchstart' : 'mousedown';\nlet eventMoveType = 'mousemove';\nlet eventEndType = 'mouseup';\nif(isomorphic.isClient()){\n\teventMoveType = window.PointerEvent ? 'pointermove' : (('ontouchmove' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchmove' : 'mousemove';\n\teventEndType = window.PointerEvent ? 'pointerup' : (('ontouchend' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchend' : 'mouseup';\n}\n\nconst deFocus = (ctrl) => {\n    if (focusElement) {\n        focusElement.blur();\n    }\n    focusElement = undefined;\n    ctrl.hasFocus = false;\n};\n\nconst focus = (ctrl, el) => {\n    deFocus(ctrl);\n    focusElement = el;\n    ctrl.hasFocus = true;\n};\n\nconst positionFromEvent = (e, isVertical) => {\n    if (p.isTouch) {\n        return isVertical ? e.touches[0].pageY : e.touches[0].pageX;\n    } else {\n        return isVertical ? e.pageY : e.pageX;\n    }\n};\n\nconst updatePinPosition = (ctrl) => {\n    if (ctrl.controlEl && ctrl.pinEl) {\n        const left = ctrl.fraction() * ctrl.rangeWidth;\n        ctrl.pinEl.style.left = left + 'px';\n    }\n};\n\nconst updateValue = (ctrl, value) => {\n    ctrl.setValue(value);\n    updatePinPosition(ctrl);\n};\n\nconst generateTickMarks = (min, max, stepSize) => {\n    const steps = Math.round((max - min) / stepSize);\n    const items = [];\n    let s = steps + 1;\n    while (s > 0) {\n        items.push(m('div', {class: CSS_CLASSES.tick}));\n        s--;\n    }\n    return items;\n};\n\nconst readRangeData = (ctrl) => {\n    if (ctrl.controlEl) {\n        // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n        ctrl.controlWidth = themeConfig.thumb_size;\n        ctrl.rangeWidth = ctrl.trackEl.getBoundingClientRect().width - ctrl.controlWidth;\n        const styles = window.getComputedStyle(ctrl.trackEl);\n        ctrl.rangeOffset = parseFloat(styles.marginLeft);\n    }\n};\n\nconst calculateClickOffset = (ctrl, controlOffset = 0) => {\n    ctrl.clickOffset = ctrl.trackEl.getBoundingClientRect().left - (ctrl.rangeOffset - ctrl.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (ctrl, e) => {\n    const controlPos = ctrl.controlEl.getBoundingClientRect().left;\n    const eventPos = positionFromEvent(e);\n    const controlOffset = eventPos - controlPos - ctrl.controlWidth / 2;\n    calculateClickOffset(ctrl, controlOffset);\n};\n\nconst initTrackEvent = (ctrl) => {\n    calculateClickOffset(ctrl, 0);\n};\n\nconst handlePosEvent = (ctrl, e) => {\n    const pos = positionFromEvent(e) - ctrl.clickOffset;\n    const value = ctrl.min + ((pos - ctrl.rangeOffset) / ctrl.rangeWidth) * (ctrl.max - ctrl.min);\n    updateValue(ctrl, value);\n    m.redraw();\n};\n\nconst startDrag = (ctrl, opts, e) => {\n\tif(isomorphic.isServer()) {\n\t\treturn;\n\t}\n    if (ctrl.isDragging) return;\n    e.preventDefault();\n    ctrl.isDragging = true;\n    ctrl.isActive = true;\n    deFocus(ctrl);\n\n    const drag = (e) => {\n        if (!ctrl.isDragging) return;\n        handlePosEvent(ctrl, e);\n    };\n\n    const endDrag = () => {\n        if (!ctrl.isDragging) return;\n        ctrl.isDragging = false;\n        ctrl.isActive = false;\n        deFocus(ctrl);\n        window.removeEventListener(eventMoveType, drag);\n        window.removeEventListener(eventEndType, endDrag);\n        m.redraw();\n    };\n\n    window.addEventListener(eventMoveType, drag);\n    window.addEventListener(eventEndType, endDrag);\n\n    readRangeData(ctrl);\n\n    if (opts.pin) {\n        updatePinPosition(ctrl);\n    }\n};\n\nconst startTrack = (ctrl, opts, e) => {\n    e.preventDefault();\n    if (ctrl.isDragging) return;\n    readRangeData(ctrl);\n    initTrackEvent(ctrl);\n    handlePosEvent(ctrl, e);\n    startDrag(ctrl, opts, e);\n};\n\nconst createSlider = (ctrl, opts = {}, hasTicks, interactiveTrack) => {\n    const fraction = ctrl.fraction();\n    const stepCount = Math.max(10, parseInt(opts.step, 10) || 1); // not more than 100 steps on the screen\n\n    const onStartTrack = (e) => {\n        startTrack(ctrl, opts, e);\n    };\n\n    const onInitDrag = (e) => {\n        readRangeData(ctrl);\n        initControlEvent(ctrl, e);\n        startDrag(ctrl, opts, e);\n    };\n\n    const flexValueCss = fraction + ' 1 0%';\n    const flexRestValue = (1 - fraction);\n    const flexRestCss = flexRestValue + ' 1 0%';\n\n    return [\n        m('div', Object.assign({}, {\n            class: CSS_CLASSES.track,\n            config: (el, inited) => {\n                if (inited) return;\n                ctrl.trackEl = el;\n                if (opts.pin) {\n                    setTimeout(() => {\n                        updatePinPosition(ctrl);\n                    }, 0);\n                }\n            }\n        }, (interactiveTrack && !opts.disabled && !p.isTouch) ? {\n            onmousedown: onStartTrack\n        } : null, (interactiveTrack && !opts.disabled && p.isTouch) ? {\n            ontouchstart: onStartTrack\n        } : null), [\n            m('div',\n                {\n                    class: CSS_CLASSES.trackPart + ' ' + CSS_CLASSES.trackPartValue,\n                    style: {\n                        flex: flexValueCss,\n                        '-ms-flex': flexValueCss,\n                        webkitFlex: flexValueCss\n                    }\n                },\n                m('div', {class: CSS_CLASSES.trackBar},\n                    m('div', {class: CSS_CLASSES.trackBarValue})\n                )\n            ),\n            m('div', Object.assign({},\n                {\n                    class: CSS_CLASSES.control,\n                    config: (el, inited) => {\n                        if (inited) return;\n                        ctrl.controlEl = el;\n                    }\n                }, opts.disabled ? {\n                    disabled: true\n                } : {\n                    tabindex: opts.tabindex || 0,\n                    onfocus: () => {\n                        focus(ctrl, ctrl.controlEl);\n                    },\n                    onblur: () => {\n                        deFocus(ctrl);\n                    },\n                    onkeydown: (e) => {\n                        if (e.which === 27) {\n                            // ESCAPE\n                            ctrl.controlEl.blur(e);\n                        } else if (e.which === 37) {\n                            // LEFT\n                            ctrl.decrease(e.shiftKey);\n                        } else if (e.which === 38) {\n                            // UP\n                            ctrl.increase(e.shiftKey);\n                        } else if (e.which === 39) {\n                            // RIGHT\n                            ctrl.increase(e.shiftKey);\n                        } else if (e.which === 40) {\n                            // DOWN\n                            ctrl.decrease(e.shiftKey);\n                        }\n                        readRangeData(ctrl);\n                        updatePinPosition(ctrl);\n                    }\n                },\n                (!opts.disabled && !p.isTouch) ? {\n                    onmousedown: onInitDrag\n                } : null,\n                (!opts.disabled && p.isTouch) ? {\n                    ontouchstart: onInitDrag\n                } : null,\n                opts.events ? opts.events : null,\n                hasTicks ? {\n                    step: stepCount\n                } : null\n            ), opts.icon ? m('div', {class: CSS_CLASSES.thumb}, opts.icon) : null),\n            m('div',\n                {\n                    class: CSS_CLASSES.trackPart + ' ' + CSS_CLASSES.trackPartRest,\n                    style: {\n                        flex: flexRestCss,\n                        '-ms-flex': flexRestCss,\n                        webkitFlex: flexRestCss,\n                        'max-width': (flexRestValue * 100) + '%' // for IE Edge\n                    }\n                },\n                m('div', {class: CSS_CLASSES.trackBar},\n                    m('div', {class: CSS_CLASSES.trackBarValue})\n                )\n            ),\n            (hasTicks && !opts.disabled) ? m('div', {class: CSS_CLASSES.ticks}, generateTickMarks(ctrl.min, ctrl.max, stepCount)) : null,\n            (hasTicks && opts.pin && !opts.disabled) ? m('div', {\n                class: CSS_CLASSES.pin,\n                value: Math.round(ctrl.value()),\n                config: (el, inited) => {\n                    if (inited) return;\n                    ctrl.pinEl = el;\n                }\n            }) : null\n        ])\n    ];\n};\n\nconst createView = (ctrl, opts = {}) => {\n    if (typeof opts.value === 'function') {\n        ctrl.setValue(opts.value());\n    }\n    const tag = opts.tag || 'div';\n    const hasTicks = opts.ticks !== undefined && opts.ticks !== false;\n    const interactiveTrack = (opts.interactiveTrack !== undefined) ? opts.interactiveTrack : true;\n    const props = {\n        class: [\n            CSS_CLASSES.block,\n            (opts.disabled ? CSS_CLASSES.isDisabled : null),\n            (opts.pin ? CSS_CLASSES.hasPin : null),\n            (interactiveTrack ? CSS_CLASSES.hasTrack : null),\n            (ctrl.isActive ? CSS_CLASSES.isActive : null),\n            (ctrl.hasFocus ? CSS_CLASSES.hasFocus : null),\n            (ctrl.fraction() === 0 ? CSS_CLASSES.isAtMin : null),\n            (hasTicks ? CSS_CLASSES.hasTicks : null),\n            opts.class\n        ].join(' '),\n        id: opts.id || '',\n        config: opts.config\n    };\n    const content = createSlider(ctrl, opts, hasTicks, interactiveTrack);\n    return m(tag, props, [opts.before, content, opts.after]);\n};\n\nconst component = {\n    controller: (opts = {}) => {\n        const min = (opts.min !== undefined) ? opts.min : 0;\n        const max = (opts.max !== undefined) ? opts.max : 100;\n        const step = (opts.step !== undefined) ? opts.step : 1;\n        const defaultValue = 0;\n        let fraction = min;\n        let value = defaultValue;\n\n        if (typeof opts.value === 'function') {\n            const v = opts.value();\n            value = (v !== undefined) ? v : defaultValue;\n        } else {\n            value = (opts.value !== undefined) ? opts.value : defaultValue;\n        }\n\n        const setValue = (v) => {\n            if (v < min) v = min;\n            if (v > max) v = max;\n            value = step ? (Math.round(v / step) * step) : v;\n            fraction = (value - min) / (max - min);\n            if (opts.getValue) {\n                opts.getValue(value);\n            }\n        };\n\n        setValue(value);\n\n        return {\n            min,\n            max,\n            trackEl: null,\n            controlEl: null,\n            pinEl: null,\n            setValue,\n            value: () => (value),\n            fraction: () => (fraction),\n            increase: (multiply) => (setValue(value + (multiply ? 10 : 1) * (step || 1))),\n            decrease: (multiply) => (setValue(value - (multiply ? 10 : 1) * (step || 1))),\n            isActive: false,\n            hasFocus: false,\n            isDragging: false,\n            // coordinates\n            controlWidth: 0,\n            rangeWidth: 0,\n            rangeOffset: 0,\n            clickOffset: 0\n        };\n    },\n    view: (ctrl, opts = {}) => {\n        return createView(ctrl, opts);\n    }\n};\n\nexport default component;\n"]}