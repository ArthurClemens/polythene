{"version":3,"sources":["slider.es6"],"names":["require","_polythene","_mithril","_config","CSS_CLASSES","block","thumb","label","track","trackPart","trackPartValue","trackPartRest","trackBar","trackBarValue","control","ticks","tick","pin","isDisabled","isActive","hasTrack","hasPin","hasFocus","isAtMin","hasTicks","focusElement","eventMoveType","eventEndType","window","PointerEvent","DocumentTouch","document","deFocus","ctrl","blur","undefined","focus","el","positionFromEvent","e","isVertical","_polythene2","default","isTouch","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","min","max","stepSize","steps","Math","round","items","s","push","_mithril2","class","readRangeData","controlWidth","_config2","thumb_size","trackEl","getBoundingClientRect","width","styles","getComputedStyle","rangeOffset","parseFloat","marginLeft","calculateClickOffset","controlOffset","arguments","length","clickOffset","initControlEvent","controlPos","eventPos","initTrackEvent","handlePosEvent","pos","redraw","startDrag","opts","isDragging","preventDefault","drag","endDrag","removeEventListener","addEventListener","startTrack","createSlider","interactiveTrack","stepCount","parseInt","step","onStartTrack","onInitDrag","flexValueCss","flexRestValue","flexRestCss","Object","assign","config","inited","setTimeout","disabled","onmousedown","ontouchstart","flex","-ms-flex","webkitFlex","tabindex","onfocus","onblur","onkeydown","which","decrease","shiftKey","increase","events","icon","max-width","createView","tag","props","join","id","content","before","after","component","controller","defaultValue","_fraction","_value","v","getValue","multiply","view"],"mappings":"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","file":"slider.js","sourcesContent":["import 'polythene/common/object.assign';\nimport p from 'polythene/polythene/polythene';\nimport m from 'mithril';\nimport 'polythene/slider/theme/theme';\nimport themeConfig from 'polythene/slider/theme/config';\n\nconst CSS_CLASSES = {\n    block: 'pe-slider',\n    thumb: 'pe-slider__thumb',\n    label: 'pe-slider__label',\n    track: 'pe-slider__track',\n    trackPart: 'pe-slider__track-part',\n    trackPartValue: 'pe-slider__track-value',\n    trackPartRest: 'pe-slider__track-rest',\n    trackBar: 'pe-slider__track-bar',\n    trackBarValue: 'pe-slider__track-bar-value',\n\n    control: 'pe-slider__control',\n    ticks: 'pe-slider__ticks',\n    tick: 'pe-slider__ticks-tick',\n    pin: 'pe-slider__pin',\n\n    isDisabled: 'pe-slider--disabled',\n    isActive: 'pe-slider--active',\n    hasTrack: 'pe-slider--track',\n    hasPin: 'pe-slider--pin',\n    hasFocus: 'pe-slider--focus',\n    isAtMin: 'pe-slider--min',\n    hasTicks: 'pe-slider--ticks'\n};\n\nlet focusElement;\n\n// const eventStartType = window.PointerEvent ? 'pointerdown' : (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchstart' : 'mousedown';\nlet eventMoveType = 'mousemove';\nlet eventEndType = 'mouseup';\nif(typeof window !== \"undefined\"){\n\teventMoveType = window.PointerEvent ? 'pointermove' : (('ontouchmove' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchmove' : 'mousemove';\n\teventEndType = window.PointerEvent ? 'pointerup' : (('ontouchend' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchend' : 'mouseup';\n}\n\nconst deFocus = (ctrl) => {\n    if (focusElement) {\n        focusElement.blur();\n    }\n    focusElement = undefined;\n    ctrl.hasFocus = false;\n};\n\nconst focus = (ctrl, el) => {\n    deFocus(ctrl);\n    focusElement = el;\n    ctrl.hasFocus = true;\n};\n\nconst positionFromEvent = (e, isVertical) => {\n    if (p.isTouch) {\n        return isVertical ? e.touches[0].pageY : e.touches[0].pageX;\n    } else {\n        return isVertical ? e.pageY : e.pageX;\n    }\n};\n\nconst updatePinPosition = (ctrl) => {\n    if (ctrl.controlEl && ctrl.pinEl) {\n        const left = ctrl.fraction() * ctrl.rangeWidth;\n        ctrl.pinEl.style.left = left + 'px';\n    }\n};\n\nconst updateValue = (ctrl, value) => {\n    ctrl.setValue(value);\n    updatePinPosition(ctrl);\n};\n\nconst generateTickMarks = (min, max, stepSize) => {\n    const steps = Math.round((max - min) / stepSize);\n    const items = [];\n    let s = steps + 1;\n    while (s > 0) {\n        items.push(m('div', {class: CSS_CLASSES.tick}));\n        s--;\n    }\n    return items;\n};\n\nconst readRangeData = (ctrl) => {\n    if (ctrl.controlEl) {\n        // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n        ctrl.controlWidth = themeConfig.thumb_size;\n        ctrl.rangeWidth = ctrl.trackEl.getBoundingClientRect().width - ctrl.controlWidth;\n        const styles = window.getComputedStyle(ctrl.trackEl);\n        ctrl.rangeOffset = parseFloat(styles.marginLeft);\n    }\n};\n\nconst calculateClickOffset = (ctrl, controlOffset = 0) => {\n    ctrl.clickOffset = ctrl.trackEl.getBoundingClientRect().left - (ctrl.rangeOffset - ctrl.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (ctrl, e) => {\n    const controlPos = ctrl.controlEl.getBoundingClientRect().left;\n    const eventPos = positionFromEvent(e);\n    const controlOffset = eventPos - controlPos - ctrl.controlWidth / 2;\n    calculateClickOffset(ctrl, controlOffset);\n};\n\nconst initTrackEvent = (ctrl) => {\n    calculateClickOffset(ctrl, 0);\n};\n\nconst handlePosEvent = (ctrl, e) => {\n    const pos = positionFromEvent(e) - ctrl.clickOffset;\n    const value = ctrl.min + ((pos - ctrl.rangeOffset) / ctrl.rangeWidth) * (ctrl.max - ctrl.min);\n    updateValue(ctrl, value);\n    m.redraw();\n};\n\nconst startDrag = (ctrl, opts, e) => {\n\tif(typeof window === \"undefined\") {\n\t\treturn;\n\t}\n    if (ctrl.isDragging) return;\n    e.preventDefault();\n    ctrl.isDragging = true;\n    ctrl.isActive = true;\n    deFocus(ctrl);\n\n    const drag = (e) => {\n        if (!ctrl.isDragging) return;\n        handlePosEvent(ctrl, e);\n    };\n\n    const endDrag = () => {\n        if (!ctrl.isDragging) return;\n        ctrl.isDragging = false;\n        ctrl.isActive = false;\n        deFocus(ctrl);\n        window.removeEventListener(eventMoveType, drag);\n        window.removeEventListener(eventEndType, endDrag);\n        m.redraw();\n    };\n\n    window.addEventListener(eventMoveType, drag);\n    window.addEventListener(eventEndType, endDrag);\n\n    readRangeData(ctrl);\n\n    if (opts.pin) {\n        updatePinPosition(ctrl);\n    }\n};\n\nconst startTrack = (ctrl, opts, e) => {\n    e.preventDefault();\n    if (ctrl.isDragging) return;\n    readRangeData(ctrl);\n    initTrackEvent(ctrl);\n    handlePosEvent(ctrl, e);\n    startDrag(ctrl, opts, e);\n};\n\nconst createSlider = (ctrl, opts = {}, hasTicks, interactiveTrack) => {\n    const fraction = ctrl.fraction();\n    const stepCount = Math.max(10, parseInt(opts.step, 10) || 1); // not more than 100 steps on the screen\n\n    const onStartTrack = (e) => {\n        startTrack(ctrl, opts, e);\n    };\n\n    const onInitDrag = (e) => {\n        readRangeData(ctrl);\n        initControlEvent(ctrl, e);\n        startDrag(ctrl, opts, e);\n    };\n\n    const flexValueCss = fraction + ' 1 0%';\n    const flexRestValue = (1 - fraction);\n    const flexRestCss = flexRestValue + ' 1 0%';\n\n    return [\n        m('div', Object.assign({}, {\n            class: CSS_CLASSES.track,\n            config: (el, inited) => {\n                if (inited) return;\n                ctrl.trackEl = el;\n                if (opts.pin) {\n                    setTimeout(() => {\n                        updatePinPosition(ctrl);\n                    }, 0);\n                }\n            }\n        }, (interactiveTrack && !opts.disabled && !p.isTouch) ? {\n            onmousedown: onStartTrack\n        } : null, (interactiveTrack && !opts.disabled && p.isTouch) ? {\n            ontouchstart: onStartTrack\n        } : null), [\n            m('div',\n                {\n                    class: CSS_CLASSES.trackPart + ' ' + CSS_CLASSES.trackPartValue,\n                    style: {\n                        flex: flexValueCss,\n                        '-ms-flex': flexValueCss,\n                        webkitFlex: flexValueCss\n                    }\n                },\n                m('div', {class: CSS_CLASSES.trackBar},\n                    m('div', {class: CSS_CLASSES.trackBarValue})\n                )\n            ),\n            m('div', Object.assign({},\n                {\n                    class: CSS_CLASSES.control,\n                    config: (el, inited) => {\n                        if (inited) return;\n                        ctrl.controlEl = el;\n                    }\n                }, opts.disabled ? {\n                    disabled: true\n                } : {\n                    tabindex: opts.tabindex || 0,\n                    onfocus: () => {\n                        focus(ctrl, ctrl.controlEl);\n                    },\n                    onblur: () => {\n                        deFocus(ctrl);\n                    },\n                    onkeydown: (e) => {\n                        if (e.which === 27) {\n                            // ESCAPE\n                            ctrl.controlEl.blur(e);\n                        } else if (e.which === 37) {\n                            // LEFT\n                            ctrl.decrease(e.shiftKey);\n                        } else if (e.which === 38) {\n                            // UP\n                            ctrl.increase(e.shiftKey);\n                        } else if (e.which === 39) {\n                            // RIGHT\n                            ctrl.increase(e.shiftKey);\n                        } else if (e.which === 40) {\n                            // DOWN\n                            ctrl.decrease(e.shiftKey);\n                        }\n                        readRangeData(ctrl);\n                        updatePinPosition(ctrl);\n                    }\n                },\n                (!opts.disabled && !p.isTouch) ? {\n                    onmousedown: onInitDrag\n                } : null,\n                (!opts.disabled && p.isTouch) ? {\n                    ontouchstart: onInitDrag\n                } : null,\n                opts.events ? opts.events : null,\n                hasTicks ? {\n                    step: stepCount\n                } : null\n            ), opts.icon ? m('div', {class: CSS_CLASSES.thumb}, opts.icon) : null),\n            m('div',\n                {\n                    class: CSS_CLASSES.trackPart + ' ' + CSS_CLASSES.trackPartRest,\n                    style: {\n                        flex: flexRestCss,\n                        '-ms-flex': flexRestCss,\n                        webkitFlex: flexRestCss,\n                        'max-width': (flexRestValue * 100) + '%' // for IE Edge\n                    }\n                },\n                m('div', {class: CSS_CLASSES.trackBar},\n                    m('div', {class: CSS_CLASSES.trackBarValue})\n                )\n            ),\n            (hasTicks && !opts.disabled) ? m('div', {class: CSS_CLASSES.ticks}, generateTickMarks(ctrl.min, ctrl.max, stepCount)) : null,\n            (hasTicks && opts.pin && !opts.disabled) ? m('div', {\n                class: CSS_CLASSES.pin,\n                value: Math.round(ctrl.value()),\n                config: (el, inited) => {\n                    if (inited) return;\n                    ctrl.pinEl = el;\n                }\n            }) : null\n        ])\n    ];\n};\n\nconst createView = (ctrl, opts = {}) => {\n    if (typeof opts.value === 'function') {\n        ctrl.setValue(opts.value());\n    }\n    const tag = opts.tag || 'div';\n    const hasTicks = opts.ticks !== undefined && opts.ticks !== false;\n    const interactiveTrack = (opts.interactiveTrack !== undefined) ? opts.interactiveTrack : true;\n    const props = {\n        class: [\n            CSS_CLASSES.block,\n            (opts.disabled ? CSS_CLASSES.isDisabled : null),\n            (opts.pin ? CSS_CLASSES.hasPin : null),\n            (interactiveTrack ? CSS_CLASSES.hasTrack : null),\n            (ctrl.isActive ? CSS_CLASSES.isActive : null),\n            (ctrl.hasFocus ? CSS_CLASSES.hasFocus : null),\n            (ctrl.fraction() === 0 ? CSS_CLASSES.isAtMin : null),\n            (hasTicks ? CSS_CLASSES.hasTicks : null),\n            opts.class\n        ].join(' '),\n        id: opts.id || '',\n        config: opts.config\n    };\n    const content = createSlider(ctrl, opts, hasTicks, interactiveTrack);\n    return m(tag, props, [opts.before, content, opts.after]);\n};\n\nconst component = {\n    controller: (opts = {}) => {\n        const min = (opts.min !== undefined) ? opts.min : 0;\n        const max = (opts.max !== undefined) ? opts.max : 100;\n        const step = (opts.step !== undefined) ? opts.step : 1;\n        const defaultValue = 0;\n        let fraction = min;\n        let value = defaultValue;\n\n        if (typeof opts.value === 'function') {\n            const v = opts.value();\n            value = (v !== undefined) ? v : defaultValue;\n        } else {\n            value = (opts.value !== undefined) ? opts.value : defaultValue;\n        }\n\n        const setValue = (v) => {\n            if (v < min) v = min;\n            if (v > max) v = max;\n            value = step ? (Math.round(v / step) * step) : v;\n            fraction = (value - min) / (max - min);\n            if (opts.getValue) {\n                opts.getValue(value);\n            }\n        };\n\n        setValue(value);\n\n        return {\n            min,\n            max,\n            trackEl: null,\n            controlEl: null,\n            pinEl: null,\n            setValue,\n            value: () => (value),\n            fraction: () => (fraction),\n            increase: (multiply) => (setValue(value + (multiply ? 10 : 1) * (step || 1))),\n            decrease: (multiply) => (setValue(value - (multiply ? 10 : 1) * (step || 1))),\n            isActive: false,\n            hasFocus: false,\n            isDragging: false,\n            // coordinates\n            controlWidth: 0,\n            rangeWidth: 0,\n            rangeOffset: 0,\n            clickOffset: 0\n        };\n    },\n    view: (ctrl, opts = {}) => {\n        return createView(ctrl, opts);\n    }\n};\n\nexport default component;\n"]}