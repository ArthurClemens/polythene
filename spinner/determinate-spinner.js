'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _mithril=require('mithril'),_mithril2=_interopRequireDefault(_mithril),_spinner=require('polythene/spinner/spinner'),_spinner2=_interopRequireDefault(_spinner);require('polythene/spinner/theme/determinate/theme');var _config=require('polythene/spinner/theme/determinate/config'),_config2=_interopRequireDefault(_config),_easing=require('polythene/common/easing'),_easing2=_interopRequireDefault(_easing);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var CSS_CLASSES={block:'pe-spinner-determinate',animation:'pe-spinner-determinate__animation',circle:'pe-spinner-determinate__circle',circleRight:'pe-spinner-determinate__circle--right',circleLeft:'pe-spinner-determinate__circle--left'},sizeFromType=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'regular';return _config2.default['size_'+a]},percentageValue=function(a,b,c){return a+(b-a)*c},rotateCircle=function(a,b,c,d){var e=a.style;e.transform=e['-webkit-transform']=e['-moz-transform']=e['-ms-transform']=e['-o-transform']='rotate('+percentageValue(b,c,d)+'deg)'},animate=function(a,b,c){var d=a.querySelector('.'+CSS_CLASSES.animation),e=d.style;e.clip=0.5>c?'rect(0px, '+b+'px, '+b+'px, '+b/2+'px)':'rect(auto, auto, auto, auto)';var f=a.querySelector('.'+CSS_CLASSES.circleLeft),g=a.querySelector('.'+CSS_CLASSES.circleRight);f.style.clip=g.style.clip='rect(0px, '+b/2+'px, '+b+'px, 0px)',rotateCircle(g,0,180,Math.min(1,2*c)),rotateCircle(f,0,360,c)},handlePercentage=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};b.el&&(b._previousPercentage=b._previousPercentage||0,d.animated&&b._previousPercentage!==a?function(){var e=1e3*d.updateDuration,f=null,g=function step(h){f||(f=h);var i=h-f,k=b._previousPercentage+1/e*i*(a-b._previousPercentage);animate(b.el,c,_easing2.default.easeInOutQuad(k)),b._previousPercentage=k,f&&i<e?window.requestAnimationFrame(g):f=null};window.requestAnimationFrame(g)}():(animate(b.el,c,a),b._previousPercentage=a))},component={view:function view(){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=sizeFromType(b.type);return b.content={tag:'div',attrs:{'class':CSS_CLASSES.animation},children:[{tag:'div',attrs:{'class':[CSS_CLASSES.circle,CSS_CLASSES.circleLeft].join(' ')},children:[]},{tag:'div',attrs:{'class':[CSS_CLASSES.circle,CSS_CLASSES.circleRight].join(' ')},children:[]}]},b.class=[CSS_CLASSES.block,b.class].join(' '),b.getPercentage=function(d,e){return handlePercentage(d,e,c,b)},_mithril2.default.component(_spinner2.default,b)}};exports.default=component,module.exports=exports['default'];
//# sourceMappingURL=determinate-spinner.js.map