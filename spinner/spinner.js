'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),require('polythene/common/object.assign');var _mithril=require('mithril'),_mithril2=_interopRequireDefault(_mithril),_transition=require('polythene/common/transition'),_transition2=_interopRequireDefault(_transition),_shadow=require('polythene/shadow/shadow'),_shadow2=_interopRequireDefault(_shadow);require('polythene/spinner/theme/common/theme');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var CSS_CLASSES={block:'pe-spinner',placeholder:'pe-spinner--placeholder',animation:'pe-spinner__animation',visible:'pe-spinner--visible',small:'pe-spinner--small',regular:'pe-spinner--regular',medium:'pe-spinner--medium',large:'pe-spinner--large',fab:'pe-spinner--fab',raised:'pe-spinner--raised',permanent:'pe-spinner--permanent',singleColor:'pe-spinner--single-color',animated:'pe-spinner--animated'},typeClasses={small:CSS_CLASSES.small,regular:CSS_CLASSES.regular,medium:CSS_CLASSES.medium,large:CSS_CLASSES.large,fab:CSS_CLASSES.fab},classForType=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'regular';return typeClasses[a]},show=function(a,b){if(!a.isTransitioning)return a.isTransitioning=!0,_transition2.default.show(Object.assign({},b,{el:a.el,showClass:CSS_CLASSES.visible})).then(function(){a.isTransitioning=!1,a.visible=!0})},hide=function(a,b){if(!a.isTransitioning)return a.isTransitioning=!0,_transition2.default.hide(Object.assign({},b,{el:a.el,afterHide:function afterHide(){return a.el.style.display='none'},showClass:CSS_CLASSES.visible})).then(function(){a.isTransitioning=!1,a.visible=!1,a.hide=!1,_mithril2.default.redraw()})},notifyState=function(a,b){if(b.percentage&&b.getPercentage){var c;c='function'==typeof b.percentage?b.percentage():b.percentage,b.getPercentage(c,a,b)}},createView=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=b.tag||'div',d=Object.assign({},{class:[CSS_CLASSES.block,classForType(b.type),b.singleColor?CSS_CLASSES.singleColor:null,b.raised?CSS_CLASSES.raised:null,b.animated?CSS_CLASSES.animated:null,b.permanent?CSS_CLASSES.permanent:null,b.class].join(' '),id:b.id||'',config:function config(f,g,h,i){g||(b.config&&b.config(f,g,h,i),a.el=f,notifyState(a,b),!b.permanent&&setTimeout(function(){show(a,b)},0))}},b.events?b.events:null);notifyState(a,b),a.hide&&setTimeout(function(){hide(a,b)},0);var e=[b.raised&&b.content?_mithril2.default.component(_shadow2.default,{z:b.z}):null,b.content||{tag:'div',attrs:{'class':CSS_CLASSES.animation},children:['Specific spinner missing']}];return(0,_mithril2.default)(c,d,[b.before,e,b.after])},delay=function(a,b){var c=a[b];return!0===c||isNaN(c)?!1:1e3*parseFloat(c,10)},component={controller:function controller(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return{el:null,isTransitioning:!1,visible:a.permanent||!1,hide:!1,percentage:0}},view:function view(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(!a.visible){if(void 0!==b.hide&&!b.hide||b.show){var c=delay(b,'show');c?setTimeout(function(){return a.visible=!0,_mithril2.default.redraw()},c):a.visible=!0}}else if(void 0!==b.show&&!b.show||b.hide){var c=delay(b,'hide');c?setTimeout(function(){return a.hide=!0,_mithril2.default.redraw()},c):a.hide=!0}return a.visible?createView(a,b):{tag:'span',attrs:{'class':CSS_CLASSES.placeholder},children:[]}}};exports.default=component,module.exports=exports['default'];
//# sourceMappingURL=spinner.js.map